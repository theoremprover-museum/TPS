		TPSJOBS
	TPS jobs and history of the development of TPS

	This file lists jobs to be done on TPS, roughly in the order
of priority, and more ambitious projects to be considered in the
future. 

	Also see /afs/andrew.cmu.edu/mcs/math/TPS/admin/bugs for bugs to fix
	Also see /afs/andrew.cmu.edu/mcs/math/TPS/admin/docjobs for documentation jobs
	Also see /afs/andrew.cmu.edu/mcs/math/TPS/admin/provejobs for theorems to prove
	Also see LEARNTASKS for additional small jobs
	Also see res-asst-jobs for additional jobs

============================================================
		PROCEDURES 

	Make sure the files you are working are not also being
modified by someone else. In some way, keep track of which functions
you change in case others are working on the same file.
	
	Test code before installing it!
Check sizes of relevant files to make sure we're not losing anything.
Use diff to compare the new and old versions.

	INSTALLING FILES
	Save a backup file in the old-source directory
EXAMPLE:
mv /afs/andrew.cmu.edu/mcs/math/TPS/lisp/diy.lisp /afs/andrew.cmu.edu/mcs/math/TPS/old-source/diy.lisp-to-1992-dec-31
cp /afs/cs/user/mbishop/lib/ms92-9/diy.lisp  /afs/andrew.cmu.edu/mcs/math/TPS/lisp/diy.lisp
[Don't forget to fix export, context, and defpck files too.]
	To move files (particularly if there are many of them), you
may find it convenient to modify the executable file
$tpslisp/installfiles using rectangle commands in emacs, check it, and
execute it.

	UPDATE PATCH FILE
	Add to the end (except for lines which must be at the very
end) of /afs/andrew.cmu.edu/mcs/math/TPS/common/tps3.patch:
EXAMPLE
;;initials	title of job	date
;;comment about the job that was done
(qload "core.exp")
(qload "diy")
OR
;;(qload "diy")		;;added above in the patch file

	UPDATE TPSJOBS FILES
	When you complete a job, please put your initials, the date,
the original job description, any useful comments, and the relevant
lines from tps3.patch into the tpsjobs-done file.  In general,
whenever a significant new flag is introduced, this should be
mentioned in the jobs-done file.  Keep entries in that file in the
order of when they are installed; things not yet installed go last.
The tpsjobs-done file is used in generating progress reports and
papers about TPS, and is used when problems in the code are discovered
and we need to remember what has been done.
	If the job is completely done, remove the original job
description from the tpsjobs file; if not, edit the description
appropriately so as to describe what must still be done.
	WHEN YOU ARE READY TO EDIT THESE FILES, BE CAREFUL TO
CHECK THAT OTHERS ARE NOT ALSO EDITING THEM!
	Send a mail message to Andrews about this job, with a cc to
others involved in maintaining tps.  The message should include
the text added to the tpsjobs-done file, plus any comments
which are of temporary significance and need not be kept in the
permanent record.

	Update /afs/andrew.cmu.edu/mcs/math/TPS/admin/workfiles

	Delete the files with names file~ which emacs creates (or move
them, with suitable names, to old-source) after checking carefully to

make sure they are not needed.  If these files are left around, they
become part of the tar file which is distributed to other users of
TPS. The tar file is quite big enough already! (This applies to files
for the manuals as well as lisp files.)

===============================================================
	CHECKING ETPS

I have set up a guest account for your use -- guest004

I renewed guest004 for another year. The new expiration date is 12/31/02. 
The initial password for this guest account is pb99-sub
Does not work in 2005
psj	===============================================================
===============================================================
		JOBS TO BE DONE FOR TPS
==================================================================
 the mechanism for producing the facilities guides as  latex manuals does 
produce an index, but it is not in the table of contents.	

================================================================


	Define a TPS command COMPARE-WFFS which can decide whether two wffs 
A and B are essentially the same.  One version which can be
implemented easily is to try to prove [A EQUIV B] by Rule P.  This is
implemented in TPS so that it incorporates alphabetic changes of bound
variables. 
	One can also consider more general ways of defining what is 
meant by "essentially the same", especially when definitions are
present. One specific possibility is to ask whether one can derive B from A
by using the rule EQUIVWFFS.
	More generally, one can  ask whether TPS can prove their
equivalence using a specified mode and time limit. 
	Perhaps COMPARE-WFFS should consult a flag 
COMPARE-WFFS-METHOD which will specify the method
to be used. For the present, the two methods above may suffice.
	Then define FIND-LIBWFF which will use this to see if a wff is in the user's
default-lib-dir or backup-lib-dir.
==================================================================
	POSSIBLE JOBS FOR REMY

	TPS runs under a variety of dialects of Common Lisp, but some work
needs to be done to make it easy to compile under other dialects of Lisp.
For the benefit of people who would like to use TPS or ETPS but do not
have Lisp, it would be nice to select some good Lisp which is available
without cost for Windows, Macintosh, and Linux operating systems, and
make sure that TPS can readily be compiled for that Lisp.
	Some of the facilities of TPS have never been used or tested
very much, and it would be useful to remedy this. 
	There are a number of jobs related to the TPS library, which
contains theorems, definitions, and other things. TPS has very flexible
facilities for defining classification schemes for the library, but
most of the items in the library have never been clssified. Also, it
would be useful to add many mathematical definitions and theorems to
the library, and to use TPS to check proofs of these theorems. One
might produce formal proofs for the theorems in some mathematical
paper or book. One possibility is to compare work using TPS with work
that has been done using other theorem-proving systems.  A quite
ambitious project would be to develop some semi-automatic method of
translating the definitions and theorems of Bourbaki's multi-volume
work Elements of Mathematics into items in the TPS library.
	Of course, it would be nice to formalize some portion of some
technical discipline, and use this as the basis for an automated
information system as visualized in 
http://gtps.math.cmu.edu/challenge2003.ps,
but even a small demonstration project would probably be much too
ambitious under your time constraints.
	It would be nice to create a TPS web page which shows all the
examples for which we have automatic proofs, including relevant 
information. There should be a way to update this automatically.
	TPS has many flags, which provide a convenient way to explore
many different aspects of the problem of searching for
proofs. However, it can be challenging to set the flags appropriately
when one wants to prove a particular theorem. Since certain flag
values render some other flags irrelevant, there is a command called
UPDATE-RELEVANT which allows users to conveniently take into account
the relationships between flags and the decisions previously made
while setting flags interactively. More work related to this command
needs to be done. It would be nice to have it provide helpful advice
at each stage in the process of setting these flags.
	Enhance the TEST top level so that it can be used to find
modes (flag settings) which produce short proofs of theorems which
TPS has already proved automatically.
	Some additionl flags need to be established.
	Some deprecated Java code needs to be updated. 
	It would be nice to Enhance the Java interface, and add
facilities for displaying and printing arbitrary mathematical notations.
	There are some bugs in the TPS code which need to be fixed.
	The TPS fonts, which were developed here for displaying special
symbols in X11 windows, need to be updated to modern font formats.

======================================================================


	JOBS TO BE DONE SOON (IF POSSIBLE)

Deal with Java problems
Modernize the tps fonts
Find one free lisp that can be recommended to users and make sure
 TPS will run under it; discuss this prominently on the web
 It should be available for all platforms
 Chad's Satallax is in  Steel Bank Common Lisp. http://www.sbcl.org/
Deal with the bug in checking expansion proofs
put in a flag to control expansions of definitions

Develop LatexDoc as an alternative to ScribeDoc

FINDING SHORT PROOFS

Enhance the Java interface, and add  facilities to display and
print arbitrary mathematical notations.

add things to library, and classify them

ERROR MESSAGES

	TPS runs under a variety of dialects of Common Lisp, but some work
needs to be done to make it easy to compile under other dialects of Lisp.
For the benefit of people who would like to use TPS or ETPS but do not
have Lisp, it would be nice to select some good Lisp which is available
without cost for Windows, Macintosh, and Linux operating systems, and
make sure that TPS can readily be compiled for that Lisp.
	Some of the facilities of TPS have never been used or tested
very much, and it would be useful to remedy this. 
	There are a number of jobs related to the TPS library, which
contains theorems, definitions, and other things, TPS has very flexible
facilities for defining classification schemes for the library, but
most of the items in the library have never been clssified. Also, it
would be useful to add many mathematical definitions and theorems to
the library, and to use TPS to check proofs of these theorems. One
might produce formal proofs for the theorems in some mathematical
paper or book. One possibility is to compare work using TPS with work
that has been done using other theorem-proving systems.  A quite
ambitious project would be to develop some semi-automatic method of
translating the definitions and theorems of Bourbaki's multi-volume
work Elements of Mathematics into items in the TPS library.
	It would be good to have more integration with the TPTP
Problem Library for Automated Theorem Proving at
http://www.cs.miami.edu/~tptp/
	Check the problems which were used in the 2010 CASC competition.
Try to find modes for those which TPS failed to prove.

	Of course, it would be nice to formalize some portion of some
technical discipline, and use this as the basis for an automated
information system as visualized in 
http://gtps.math.cmu.edu/challenge2003.ps,
but even a small demonstration project would probably be much too
ambitious under your time constraints.
	It would be nice to create a TPS web page which shows all the
examples for which we have automatic proofs, including relevant 
information. There should be a way to update this automatically.
	TPS has many flags, which provide a convenient way to explore
many different aspects of the problem of searching for
proofs. However, it can be challenging to set the flags appropriately
when one wants to prove a particular theorem. Since certain flag
values render some other flags irrelevant, there is a command called
UPDATE-RELEVANT which allows users to conveniently take into account
the relationships between flags and the decisions previously made
while setting flags interactively. More work related to this command
needs to be done. It would be nice to have it provide helpful advice
at each stage in the process of setting these flags.
	Enhance the TEST top level so that it can be used to find
modes (flag settings) which produce short proofs of theorems which
TPS has already proved automatically.
	Some additionl flags need to be established.
	Some deprecated Java code needs to be updated. 
	It would be nice to Enhance the Java interface, and add
facilities for displaying and printing arbitrary mathematical notations.
	There are some bugs in the TPS code which need to be fixed.
	The TPS fonts, which were developed here for displaying special
symbols in X11 windows, need to be updated to modern font formats.
	The documentation for TPS was originally written in Scribe, a
program which is like Latex, but which was available well before Latex.
Some of the manuals still need to be translated from Scribe to Latex.

Read the User Manual, and make whatever corrections and improvements
are appropriate. Compare it with the old Scribe version, which is in
/home/theorem/project/doc/user-old.
Clarify notation for Control-G, etc.

==================================================================
Prove some theorems in TPS that it was not able to prove for CASC.

Prove theorems interactively or semi-automatically.
Save proofs in /afs/andrew.cmu.edu/mcs/math/TPS/proofs

Then use AUTO-SUGGEST in TPS or other means to define a mode which 
will enable TPS to prove the theorem automatically.
Look at the description of flags in the appendix to Matt Bishop's thesis.
Use the TEST top-level in TPS to run a series of experiments with various
flag settings

Perhaps we shouild focus on examples where = plays little or no role.
=================================================================
Consider the problems involved in translating the Bourbaki definitions
and theorems semi-automatically into a theorem=proving system
==================================================================
Develop multi-processing for TPS  with CMUCL and SBCL.
==================================================================
	Generalize COMPARE-WFFS and FIND-LIBWFF

       Wffs of many types can be stored in the TPS library, and this
versatility is very useful. In principle, COMPARE-WFFS and FIND-LIBWFF
should be applicable to wffs of any type. However, for certain values
of the flag COMPARE-WFFS-METHOD, such as RULEP, it only 
makes sense to apply these commands to wffs of type 0. This should
be explained in the help message.
	At present, these commands may be  restricted to wffs of type 0, 
==================================================================
	Documentation updates

The information on installing tps with allegro list apparently says
to use the filename tps.dxl for version 5 of Allegro.
It shouold say 5 or later.

====================================================================
	AVOID LOADING LIBINDEX.REC

When the library is large, it takes time to load the libindex.rec files
whenever we start up TPS. Consider changing how the library
 facilities use libindex.rec
Could we just grep for what we want?


==================================================================
PBA and Adrian Dumitrasc				2009 August 28

		CALLING TPS ON ANDREW

see the entry in tpsjobs-done

Check whether there is any relevant information in the chapter on setting
things up in the TPS User Manual, and adjust it as needed.


/afs/andrew.cmu.edu/mcs/math/etps/tps/amd64_linux26/tps3
should be copied to
/afs/andrew.cmu.edu/mcs/math/etps/tps/common/tps3
and the former file should just be a link

=====================================================================

=====================================================================
Default value for RECORDFLAGS should be

 '(last-mode-name machine-type machine-instance
                          lisp-implementation-type 
                           DIY2-INIT-TIME-LIMIT  DIY2-NUM-ITERATIONS
                           DIY2-TIME-INCREASE-FACTOR
                           GOODMODES
                           default-ms default-mate default-expand
                          measurements
                           max-search-limit
                          search-time-limit max-utree-depth
                          max-search-depth)


==================================================================
	DATE ON TAR FILE

Have some mechanism by which people who download TPS from the web
can know the date the tar file was created, and whether there is
a new one since they last downloaded it.
==================================================================
		EXPERTFLAG

The need to put people on the expert-list is a nuisance.
Rethink experts. See more on this below.
===============================================================
Adjust the tps3.ini on andrew so that goodmodes are included
and diy2 will work.
==================================================================
		DISPLAY OF EXAMPLES

Create a TPS web page which shows all the examples for which we have
automatic proofs. Give name, wff (Displayed using java?), 
time for proof.

Have a way to update this automatically.
Use library facilities


==================================================================
		CORRECT UNSOUNDNESS

Geoff Sutcliffe found an example where TPS proves a nontheorem using mode
MODE-THM91-PR97 (one of the 53 goodmodes1).  The nontheorem is

~FORALL X(O) .X OR ~X

This has name UNSOUND1 in 
/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/andrews/unsound.lib

Fortunately, translation to ND fails.

Also, see the other unsoundness examples in
[gtps]/home/theorem/project/tps-tptp/GAZING-MODE2-unsound.tar.gz  
[gtps]/home/theorem/project/tps-tptp/MODE-THM7-MSQ-unsound.tar.gz

==================================================================
		FINDING SHORT PROOFS

Enhance the TEST top level so that it can be used to find
modes which produce short proofs of theorems TPS can prove.
Vary the etree-nat flags as well as the matingsearch flags.

==================================================================
	The help messages should tell one that 
PFENNING-TAC and COMPLETE-TRANSFORM-TAC are possible values 
for DEFAULT-TACTIC. Are there any others at present?

==================================================================


PALL should update proofwindows like PSTATUS


=============================================== 
		TPS LOCAL GUIDE

Eventually we may distribute the Programmer's Guide.
We may need a small manual "TPS Local Guide"
designed for our private use
describing various aspects of the TPS environment at CMU.
This could be created in a new directory 
/home/theorem/project/doc/local on GTPS.
It should just refer to what is in the Programmer's and
User's Guides when appropriate, not duplicate them. 

==================================================================
		UPDATE DEPRECATED JAVA CODE

2006 October 23

I compiled TPS on GTPS (using the new Lisp 
Allegro CL Enterprise Edition 8.0 [Linux (x86)]
which comes with the Suse Linux). It did produce a core image, but also
produced the  following messages:

Note: Some input files use or override a deprecated API.
Note: Recompile with -deprecation for details.

Message on JTPS 2009 Jan 20 was:
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.

Message on GTPS 2009 Oct 26 was:
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.


An API is a set of rules that describe the interface between deferent
software components, like variable names, function names, number and
position of arguments, and so on.

As these rules evolve during the software development, older versions
of rules become "deprecated" in the sense that they are still supposed
to work, but they will be removed from new versions of software. So
you have to update that code to match the newest API of Java pretty
soon. It is not an error, but just a warning to let you know that
maintenance is needed in the long run.

Florin suggested that to modify the Makefile in such a way as to
recompile with -deprecation,

"Maybe define a variable for java flags, e.g. javacf=-deprecation
and change the rule into something like 

(cd java/tps; $(javac) $(javacf) *.java) "

	A new version of Makefile was created on gtps
called Makefile.deprecate-java. In place of the following lines in Makefile

java_compile:  java_compile_tps java
	(cd java; $(javac) *.java)

java_compile_tps:  java/tps
	(cd java/tps; $(javac) *.java)

Makefile.deprecate-java contains the lines:

javacf=-deprecation

java_compile:  java_compile_tps java
	(cd java; $(javac) *.java)

java_compile_tps:  java/tps
	(cd java/tps; $(javac) $(javacf) *.java)


Makefile.deprecate-java was used temporarily as the Makefile to build
tps. This produced the following messages:

TpsApplet.java:232: warning: size() in java.awt.Component has been deprecated
            g.fillRect(0,0,size().width,size().height);
                           ^
TpsApplet.java:232: warning: size() in java.awt.Component has been deprecated
            g.fillRect(0,0,size().width,size().height);
                                        ^
TpsEventListener.java:37: warning: size() in java.awt.Component has been deprecated
            size = tpsApplet.size();
                            ^
TpsDisplayEventListener.java:37: warning: size() in java.awt.Component has been deprecated
            size = tpsDisplay.size();
                             ^
TpsDisplay.java:59: warning: size() in java.awt.Component has been deprecated
        tpsDisplayApplet.setDimen(size().width,size().height);
                                  ^
TpsDisplay.java:59: warning: size() in java.awt.Component has been deprecated
        tpsDisplayApplet.setDimen(size().width,size().height);
                                               ^
TpsInterfaceApplet.java:29: warning: resize(int,int) in java.awt.Component has been deprecated
            window.resize(700,500);
                  ^
7 warnings
Note: Some input files use or override a deprecated API.
Note: Recompile with -deprecation for details.

	I tried a quick test of the javawin facility of the
new tps on gtps. It more or less works, but the commands one types don't get
echo'd on the command line. (They do when I try the same thing using
the older lisp and Red Hat Linux on ktps.) 

A copy of Makefile.deprecate-java has been saved in
/afs/andrew.cmu.edu/mcs/math/TPS/old-source
===================================================================================


		WEB SERVICES

Set up the TPS and ETPS services on the web so that they can use
various computers in our cluster: HTPS, JTPS, KTPS.  Of course, we
need to have facilities to control this. Ideally, the fastest of
these machines which has unused capacity should be chosen.  Perhaps
consult Florin about the best way to set things up.  Maybe such
facilities are already available somewhere.  
	Document what is done, and how to use it, perhaps in the TPS
LOCAl GUIDE discussed above.

====================================================

Set up some facility, or index, which will make it easy to find
where various commands are in the tpsonline menu structure.
It would be good to have a text file that can be searched by an editor,
and perhaps some facility incorporated into tpsonline.
Have directions for updating this somewhere,

====================================================
	CMUCL and SBCL and ASDF

Add facilities for building TPS using CMUCL and SBCL and ASDF.
See $pple/yapp.
====================================================
	SATISFIABILITY OF PROPOSITIONAL FORMULAS

Program what is needed to test the
satisfiability of formulas in nnf by checking vertical
paths after rearranging then using  the following idea:

(1) Use some heuristic (or perhaps none) to order the 
propositional variables. Essentially, rename them in some
"alphabetical order so that those which occur most often
(or perhaps least often) in the given wff come first.
(2) Re-order the scopes of all the conjuctions and disjunctions
in the nnf of the wff in "lexicographic" order. 

Here is one way to define this notion:
Associate with each nnf W a string S of variables and an
equivalent nnf W' as follows:
(1) If W is a literal, S is the variable of W, and W' is W.
(2) If W is a conjucntion or disjunction (* W1 ... Wn),
where * is conjunction or disjunction and the Wi are nnfs and
Si is the string associated with Wi, let S be the result of
arranging the list (S1, ..., Sn) in lexicographic order,
and concatenating the resulting list of strings into a
single string.
At the same time, rearrange (* W1' ... Wn') in the corresponding way.
The result is W'.

Does this help the process of searching for satisfiable paths?

Look at some examples.

Maybe there are some in the tptp database. Surely there are some 
SAT databases too.

====================================================

    JAVA INTERFACE

Update lisp code so javawin will work with other lisps
(in particular, clisp)  which don't support either
multiprocessing or sockets. 

Update 13.5 in User Manual to reflect this.
============================================
		ERROR MESSAGES

Clean up the TPS code so that when TPS is built, there are
(ideally) no error messages.

====================================================
	INTERFACES WITH OTHER SYSTEMS

	Check on how to interface TPS with other systems, especially
Omega.  Sean McLaughlin wants to be able to call TPS from HOL.
Produce some documentation, perhaps with specific references to Omega
documentation. Put in User Manual (near stuff on Omega).

====================================================================

		DOCUMENTATION

	Make sure there is adequate documentation of how MS04-2
works. Just refer to your thesis when appropriate, but
a general description designed for the casual reader
is needed. In particular, the reader needs to understand 
how all those flags are used. * User Manual 
	This might serve as the basis for a paper someday. It could be
added to your thesis. or put into a technical report, or the TPS User
Manual.

	Review the current documentation, especially the 
Programmer's Guide, and try to fill in gaps and bring it up to date.
Don't hesitate to simply add small notes like "This section 
is now obsolete" (with a date) when you can't do a complete revision.

	How to update GOODMODES, what they are, etc.  * User Manual

================================================================
	DOCUMENTATION: TPS USER MANUAL

 split section "interactive mode" into subsections for "natural deduction" (first)
 and "ext seq" (for ext-seq top level), talk about rules (do a ? to get list of
 rules), go2 etc. 

 new subsection under Search Analysis showing example
 of how to take an ext-seq der to an ext exp dag pf, then using diy-lift
 to get flag settings for ms03-7 (cross ref to interactive->extseq above)

Add a section to the User Manual (in the chapter on
"Setting and Varying Flags") about TPS-TEST
including EXTRACT-TEST-INFO, TEST-INIT, etc.

============================================

Document different possibilities for student access in User Manual
set-up.mss.  

  a central tps/etps server with Unix or Windows (without separate accounts)
    * teacher sets up a web site
      (eg, http://htps.math.cmu.edu/tpsonline.pl)
    * teacher starts an etps server associated with the web site
    * student goes to this web site, starts etps via a link
    How does the done command know who 'e is?
    Fake "Accounts"/"Passwords"?  Must have a password to start
    etps at all.

  a central etps server with Unix
    (where all students have an account on this machine)
    * student telnets to this machine (under 'e's own account).
    * starts etps in a server mode.
    * then connects via a browser 
    (Then the done command knows who 'e is by the fact
        etps is running under 'e's account.)

  several Unix machines in a network which can run etps
    * student telnets to a machine (under 'e's own account).
    * starts etps in a server mode.
    * then connects via a browser 
    (Then the done command knows who 'e is by the fact
        etps is running under 'e's account.)
==================================================================
		TPS Online

Add to tutorial notes : mention PIY - (use this instead of PROVE and DIY
in example with a bestmode)
to prove a theorem for which you have no mode,
use PIY2.

Find a correct alternative to the line below and put it in the 
tps user manual:
at -f run-tpsserver 2:47pm

======================================================================
	SMALL DOCUMENTATION IMPROVEMENTS

Clarify HELP messages for various commands, especially those
listed below.
Cnsider using the wording in the ETPS User's Manual. The change needs
to be made in the raw rules files as well as the lisp files
(unless you want to regenerate the lisp files).

ECONJ
ICONJ
make it clear that ECONJ means eliminate conjunction
and ICONJ means introduce conjuction. 

INTRODUCE-GAP
AB*
EXT=0

In GRADER help messages and manual, explain MODIFY-GRADE
and ALTER-GRADES. ALTER-GRADES prompts you with the name
of each student in the class. MODIFY-GRADE asks which
students' grades need to be modified.

============================================
Use old flags instead of new MS04-2/MS03-7 when possible -
update help messages to reflect this (add new subjects).
E.G. MAX-UTREE-DEPTH ???

===========================================================================
To: Peter Andrews <andrews@cmu.edu>
From: Sean McLaughlin <seanmcl@cs.cmu.edu>
Subject: Indirect vs Absurd
Date: Wed, 15 Dec 2004 21:31:41 -0500
X-Mailer: Apple Mail (2.619)

Hi Prof. Andrews,

   In the TPS/ETPS manual, you claim that INDIRECT takes two 
contradictory lines.
I just proved a theorem in TPS with the following lines

(14)  1,2,13 !  P(OI) x^1(I)                                           
Conj: 13
(15)  1,2,11,13 !  FALSEHOOD                                     
NegElim: 12 14
(16)  1,2,11,13 !  P(OI) y^1(I)                                    
Indirect: 15
(17)  1,2,17 !  ~P(OI) x^1(I) AND ~P X(I)                             
Case 2: 6
(18)  1,2,17 !  ~P(OI) X(I)                                            
Conj: 17


Is this a bug?  Otherwise, I don't see the difference between
INDIRECT and ABSURD.

Thanks,

Sean

To reproduce, try proving x2125
I forget if you have to change the mating depth setting...

<196>prove x2125 abc 100
(100) !        EXISTS x(I) FORALL y(I) [P(OI) x EQUIV P y]
            EQUIV .EXISTS x P x EQUIV FORALL y P y                       
    PLAN1

<197>diy 100 () no


===========================================================================

		SAVEPROOF
Proofs (such as a proof of THM575) created with IND-SV-MODE
have lemmas. We need some version of SAVEPROOF which saves
the proofs of these lemmas too (or at least offers to);
if they are saved in separate files, some adjustment in the namdes
KNASTER-TARSKI-FPTHM0 and MIN0 will be needed. Perhaps all
three proofs should be saved in the same file.
============================================================
Need a way to see what substitutions for higher-order variables have been 
tried in a search. Have an internal list that we can examine.
Also, should open vpwin.


PR97C seems to take an extraordinary amount of time just to generate primsubs.
There must be a much more efficient algorithm.
Is this the only one that gives equalities as well as quantifiers
and connectives?

PRIMSUB-METHODs PR89 PR93 pr95 pr97 pr97a PR97B all generate projections, but
pr97c does not
Maybe there should be a flag to govern whether they are generated,
but there should be some way to get them.
All the code seems to be in prim.lisp

Try running X5309 with mode MODE-X5309-TRY1, but with MAX-SUBSTS-VAR
set to 7, and QUERY-USER set to QUERY-JFORMS, and SEARCH-TIME-LIMIT
set to 7200, and MAX-SEARCH-LIMIT set to 7200 . Reject the searches.
Why does it take TPS such an extraordinary amount of time and garbage
collection just to generate the primsub options?
Saw message
There are 334 unifiers for each of (q^19<OI> p^680<OI> p^681<OI>
Temporarily set MAX-SUBSTS-VAR to 1 and that made 
the generation of primsubs very quick; however, this also revealed
a bug which seems to prevent further work on X5309 with
primsub-method pr97c


Why was it computing these when it was just getting ready to ask me
whether to search on this jform?


Some of the flags in MS91-6 should also be in the subject PRIMSUBS

=================================================
=================================================

Bug
>mode-x5309-try2 on pcpc1
HELP (STRING): Help for object [""]>"Got a bug on X5309 with these flags
 fairly quickly while rejecting all searches proposed by query-user"
Set-variable substitutions in this jform:
p48oi
  -->  &w50i.~[p1001ii w50 = p1002ii w50] [ p1003oi w50
Search on this jform? [Yes]>n
********* CHANGING PRIMSUBS 
q46oi : &w1i.p980oi w1 \ .p981oi w1 \ p982oi w1
Error: Non-structure argument NIL passed to structure-ref
  [condition type: SIMPLE-ERROR]
Note: name-prim generates no other primsubs; maybe this error should
simply be a message saying we have run out of primsubs

when running diy with MS98-1, if we say yes to
whether we want to open a vpwin, it opens but nothing
gets put into it.
--------------------------------------------
===========================================================

                 LOAD looks in homedir

All our load functions, tload, qload, cload,
look in the user's home directory before
the usual source-dir(s). locate-tps-file
is the function that does this.
If the user has a file in the home dir
by the same name (e.g., "review"),
TPS will try to use this one (even if it's
not a lisp file at all).
============================================
          UNIXLIB

When entering UNIXLIB, allow the user to
give a class-scheme to fetch from the library.

unix-library1.lisp  function unix-library

?? in prompt should list known class-schemes
and tell how to find out what class-schemes
are available in the library 


====================================================
	Fix bugs. See /afs/andrew.cmu.edu/mcs/math/TPS/admin/bugsdir.
Use the TPS command BUG-RESTORE.

Look through the bugs file and see what bugs are still there and worth
working on. Generally don't worry about bugs in search procedures
which we now rarely use. 

Clean up records of bugs as you deal with them. Put notes about those
that are examined and seem not worthy of current attention.

==================================================================
pstatus
(99 2 3)

Saving in file /home/pa01/etps/x2112.work.

<6>stop-save
File /home/pa01/etps/x2112.work written.

<7>pstatus
(99 2 3)


<8>exercise x2114
(100) {  ;xi Roii x bi [ ;yi['zi R y z - R ai y] - 'ui;vi R u v           PLAN1

<9>pstatus
(100)


<10>
Why doesn't etps start a new work file when a new
exercise is started and no work file is open?
---------------------------------------------
======================================================================
       I tried to use DATEREC on THM100D to change its provability status
to "semi-automatic natural deduction proof", but TPS just hung up and
I've been waiting over a day for a response. There are lots of deeply nested 
definitions in this theorem, and they may trigger some bug.

======================================================================
          DISPLAY-TIME

Need a flag DISPLAY-TIME-VERBOSE to suppress
output of timing info.
(Esp during NORMALIZE-PROOF add to help msg for NORMALIZE-PROOF)
============================================

UPDATE-PROVABILITY should distinguish between DIY2 and DIY.
------------------------------------------------------------
================================================================
       SUPPRESS-FLAGS-LIST

Problem saving flags with mode if listed on SUPPRESS-FLAGS-LIST
- this isn't the intention -
============================================
        ETPS Browser Interface

Logfiles : Allow command line argument for logdir to be NIL
  in which case standard-out is not sent to a log file, but say, /dev/null
Put this into the documentation (also doc for command-line-switches)


RESTORE-WORK, EXECUTE-FILE : These still don't work with ETPS interface
When one executes BEGIN-PRFW, the single-step mode of display
stops working. Perhaps this is because ETPS has entered a different 
top-level.


MAKE SURE students can't set EXPERTFLAG T.

Figure out how to get remote input to be echoed into the work file
(see save-work.lisp).

Can we really run several at once?


I now have a version of this (See tpsjobs-done entry 2003 Jan 2).
We should test that the DONE command works as intended
(I'm not sure yet).
It still needs to be documented and the relevant web related
files (in /home/httpd/cgi-bin on htps) need to be included
in the distribution (along with instructions on how to use them).

Students should be able to use ETPS through a browser
via Java interface and do the done command properly.
============================================================
Define defwffop's for replace-wff-posn and get-wff-posn
(in wffsub1.lisp) and instantiate-all-rec (wffabb2.lisp)
============================================================
                       EXT-SEQ

Need SUBPROOF, etc.

Need something about EXT-SEQ in the User Manual.
This can be taken from your thesis.

Cannot apply BEGIN-PRFW in EXT-SEQ top level.


What translations to and from proofs in this format 
will we eventually have?

Generalize restoreproof to handle different kinds of prfs?
Combine with save-etree and restore-etree?
What about ext-exp-dags?

==================================================================
lisps on mac os x
From: Lyle42@aol.com
Date: Sun, 27 Feb 2005 23:08:35 EST

I found this link on the current state of lisp for Mac OS X.  If one
of these worked with xGrid, Apple's distributed processing program,
you'd be all set.  Then you could run it all on a rack of these Mac g5
xServe machines http://www.apple.com/xserve/.  

lisps on OS X
http://lemonodor.com/archives/001075.html

=================================================================
		TPS-TEST and DATEREC

Need timing information for the entire run
Need option of showing (room t), (room), or (room nil).
Need a daterec option for recording these things
and the significant arguments given to tps-test,
including the value of GOODMODES.


daterec isn't changing keywords or adding bestmodes
when it first copies a record . . .

It does not also offer to create a bestmode

============================================
Date: Mon, 07 Jun 2004 18:54:17 -0400
My interactive proof of THM410 has the comment
 This is THM411, but I ran into a bug when I tried to ASSERT it;
an interactive proof has been found and saved.


Example of problem trying to ASSERT THM411:
<17>prove thm124
PREFIX (SYMBOL): Name of the Proof [THM124]>
NUM (LINE): Line Number for Theorem [100]>
Would you like to load a mode for this theorem? [No]>

<18>assert
THEOREM (THEOREM): Name of Theorem [No Default]>thm411
LINE (LINE): Line with Theorem Instance [No Default]>50
Theorem THM411 contains the following metavariables: (y(I) p(OI) x(I) s(II)). 
Do you want extended help? [No]>
y (GVAR):  [y(I)]>
p (GWFF):  [p(OI)]>
x (GVAR):  [x(I)]>
s (T):  [
Error: Funcall of NIL which is a non-function.
  [condition type: SIMPLE-ERROR]

Restart actions (select using :continue):
 0: Abort entirely from this process.
[1] CL-USER(1): :res
============================================
When one uses DATEREC on a theorem from someone else's
library, TPS offers to copy that theorem into one's own 
library, but then neglects to ask about updating
BESTMODES for that theorem.
=====================================================================
When one proves a theorem using PIY2 and then uses DATEREC,
TPS doesn't offer the correct default for the mode when one
wants to update BESTMODES.
 LAST-MODE-NAME is in the subject TRANSMIT, so it's not obvious
what the source of the problem is.
============================================
	TRANSLATION FOR THM409-*
thm409-* gets the mating fairly quickly, but takes 
a very long time to translate the proof.
What's going on?
==========================================================
[gtps]/home/theorem/project/doc/facilities/manual-short.err lists 16 errors.
Some lines are too long.
Someday this should all be converted to tex or latex, so don't
worry about it.
=======================================================================
		ICONJ and ECONJ

When one applies the rule ICONJ, the justification is printed
in the proof as Conj. It should be IConj.

When one applies the rule ECONJ, the justification is printed
in the proof as Conj. It should be EConj.

Also fix nat-etree (etc.?) to be compatible with this.

============================================
   LOAD-WARN-P

Check if LOAD-WARN-P is really showing subdirs
when T.
=================================================================

       PSEQ

Strange results with PPWFFLAG T and PSEQ-USE-LABELS NIL.


===========================================================================
	JAVAWIN FONTS

Create a JAVAWIN font scaled to size 1.5 (between the current 1 and 2).
After it is created, it will need to be twa\eaked to look good.

Provide a little documentation about this. Say where the relevant
information is.

===========================================================================


	UIk, UGENk, EGENk (where k = 2,3,4)
	It would be very convenient to have extensions of
UI, UGEN, and EGEN which would allow us to deal with
n occurrences of adjacent quantifiers of the same type
all at once. These commands could be called UI2, UI3, UI4,
UGEN2, etc. Probably there is little need to go beyond
4 quantifiers.
	 When one uses UI2 (for example) to instantiate
FORALL x FORALL y A, one should simultaneously substitute for
x and y, not do this sequentially. Lambda conversion should
take care of this within our current framework.
	Hopefully these commands will be easy to describe
in the RULES package.

===========================================================
Check how ETPS DONE command
records scores when running on Andrew.
(When does it create new user dirs?)
===========================================================
       GOOD MODES

CREATE-GOODMODES-FROM-ALL-BESTMODES

- look through lib-bestmodes hash table to get all best modes
and create goodmodes from it - 
(optionally?) reset the GOODMODES flag to this.
optionally insert into the library.

* Documentation in the User Manual (for updating goodmodes).

Fix the way insert works in the library when the argument type is
MODES-GWFFS. One can give it a list of modes, but they don't
get put into the description.

============================================================
        JAVA INTERFACE/OMEGA INTERFACE for ETPS

* Add info to TPS manual about setting up the Java interface.
  - Including need to focus on the prompt line. 
  - include downloading and installing java.
  - also include instructions for building TPS under Windows.
    see /home/theorem/project/dist/README.windows
  - add info about using the Makefile and compiling Java -
    will complain if no java compiler, but by then everything
    else is done.

* Add info about java directory (and package) struc
  Programmers manual - also info about adding symbols.
    (Use pfaedit on jtps to create bigger copies of tps fonts
     and try them on itps. Documentation in fonts.hlp)

*  Need scrollbars on TpsDisplay's.


============================================================
What could an undergrad do?

Check that list-rules lists all rules

Translate manuals into latex
Fix the mechanism for producing the facilities guides so that
it produces latex manuals.
Convert manuals to latex
See [gtps]/home/theorem/project/doc/prog/SCRIBETOTEX-NOTES
(MB: There is a command s2latex which will go some way to converting 
 .mss files to .tex, but it's still going to need some effort to fix the
 resulting files)

Download other lisps and get TPS to run in all of them.

Pages 18-19 of the Programmer's Guide explore the
possibility of using emacs instead of xterm.  I think
that would be an excellent (small) project for an undergrad
who knows what he/she is doing.  It would really be useful
to be able to edit like in emacs and have the symbols available
as well.

More examples; put examples into proper fonts instead of generic.

Set notation
When USE-SET-NOTATION is T,
[LAMBDA x A] should print as {x | A}
[LAMBDA x A]B  should print as B EPSILON {x | A}


Make different sized fonts for X-windows

Improve the java interface
More characters.Upgrade texproof to print them too.
General mathematical notations such as integrals and fractions
Perhaps a flexible editor which will permit one to cut and paste
Better organization of menus
Help buttons for menu items.
  Cutting and pasting.

New java interface which is more like unix, but has menus

Formalize Boubaki, etc.
Rosser, Logic for Mathematicians
Semi-automatic translation? Scan pages?

Check what's been done for HOL and Isabelle

A help tree which makes it easy for people to find the commands they
want to execute and the procedures they want to use for their
objectives. This will include examples.


============================================================

Put info about prenex (see prenex.hlp under doc/etps)
into TPS user manual.
============================================================
		UNDO
Develop an UNDO facility which just reruns the work file minus
the last n commands that have been executed. Have it check for
safety, save the proof first.
This is discussed in the ETPS manual.

================================================================

In ETPS the SUBJECTS command lists all the subjects for TPS
as well as for ETPS. Change defpck (and other things?) so
that subjects irrelevant to ETPS are not loaded with ETPS.

============================================================

	EXECUTING TWO LISP CALLS AT ONCE

<18>(print 1) (print 2)
Illegal input - must be EXPERT to evaluate Lisp form.
<19>expertflag
EXPERTFLAG [T]>

The error message is inappropriate.  It'd be nice
if this wasn't an error at all.

============================================
	Proof Schemes

Expansion trees with cut nodes and merge nodes


============================================
Update USER MANUAL info on update-relevant.
============================================
      UPDATE-RELEVANT

idea: make show-relevance-paths dependent
on the current flag settings. i mean give the
user that option.


Also give info about file and line info came from. (optional)

Try MS90-9 . . . not getting relevant primsub flags


More work is needed on UPDATE-RELEVANT. If one starts with
DEFAULT-MS and chooses MS03-7, it just presents one
with some flags which have little to do with this procedure.

===============================================================
            CLASSIFICATION

generate-class-scheme could also do this:
automatic class-scheme by keywords

redefine SEARCH (and KEY) as unixlib commands to only look
within a certain class (or up/down from a class).

===============================================================
Files ~theorem/tps/.tpsrc on each tps computer
and tpsrc under admin on afs should agree.

Consider if admin/tpsrc and admin/aliases-dist
should agree (or be the same).

============================================
Edit Makefile to compile java files in $(sys-dir)/java/
in /home/theorem/project/dist and gtps, htps, jtps, & common/

copy admin/tpsrc to tps/.tpsrc onto htps and jtps

Put tpsserver in: /home/httpd/

===============================================================
		DIY-L

We need a more sophisticated version of DIY-L which
allows one to have various hypotheses in lines to which
the command is applied.

Below is a tentative revised description of DIY-L (as it should be),
which is partly modeled on the present help messages for DIY and
DIY-L.

-------------------------------------------------------------
DIY-L
DO IT YOURSELF for LEMMAS.  Calls matingsearch procedure specified by
the flag DEFAULT-MS with specified planned line and supports, then
translates the resulting proof to natural deduction.  Puts all new
lines into a specified range.  Allows some of the output to be sent to
a separate vpform window (equivalent to issuing the OPEN-MATEVPW
command before typing DIY-L).

This command can be used to derive a planned line H |- B 
from supporting lines H1 |- A1, ..., Hn |- An,
where H, H1, ..., Hn are sets of hypotheses.
Each support line Hi |- Ai is replaced (as an argument for this
command) by
Hi INTERSECT H |- [Di IMPLIES Ai], 
where Di is the conjunction of formulas in the set Hi - H. If this
set is empty, [Di IMPLIES Ai] is simply written as Ai.
Then B is derived from
[D1 IMPLIES A1] AND ... AND [Dn IMPLIES An].


--------------------------------------------------------------------------
Assuming that this is accurate, perhaps the following should be added to
the help message for DIY:

This command seeks to derive the formula asserted in the planned line
from the formulas inserted in the support lines. The hypotheses for
these lines play no role in this process.

----------------

Is there some condition on hypotheses which gets checked somewhere
by DIY and should be mentioned?

===============================================================
Make this true if it's not already:

In automatic mode, TPS works by searching for an expansion proof, and
then translating this into a natural deduction proof.  While the code
which is used in searching for expansion proofs in TPS is voluminous,
under constant development, and often contains bugs, the code which
finally applies the rules of inference to construct natural deduction
proofs is small and well tested. Thus, proofs found by TPS are very
reliable.
===================================================================

	SCRIBEPROOF

SCRIBEPROOF sometimes does a flush right at the end of a proof
line when there is not room for all the material to be flushed
right, and some of it is lost off the edge of the page.
In these situations it should do a linefeed first.

This may occur only with
use-internal-print-mode nil

===============================================================
		 Translation Tactics
	The only useful values for default-tactic for ETREE-NAT
seem to be PFENNING-TAC and COMPLETE-TRANSFORM-TAC. Is there any
way for a TPS use to discover this? Maybe there should be a more
specific argument type for ETREE-NAT.
(Someday we mighjt want to add some more translation tactics.)

	Neither of these default-tactics creates an economical proof
for X5304.  COMPLETE-TRANSFORM-TAC appears to give high priority to
applying Rule P; why doesn't Rule P get applied when TPS has derived
 g(OAA) j(A) j EQUIV ~g j j ?
	Maybe we need a variant of COMPLETE-TRANSFORM-TAC which will 
do this.

CEB				RULEP TACTIC		April 9, 2002

Changed rulep-match2 & lines-to-rulep-jform to use
etree-to-rulep-jform so the rulep-tactic applies when it
needs to.  It still doesn't always apply, so there's more
to do (eg, X5304, MODE-X5304).

-----------------------------------------------------

Classrooms
https://acis.as.cmu.edu/gale2/servlet/r25webapp
-----------------------------------------------------
		TPS Manual

Add a new chapter on User Interaction
Mention that the basics are described in the ETPS Manual
--------
Mention that we can use & as in the following examples:
alias setup1
DEF (STRING): Definition ("" to see current defn.) [""]>
SETUP1    RIGHTMARGIN 102 & CHARSIZE MAX & PROOFW-ALL-WIDTH 102 & PROOFW-ACTIVE NIL & PROOFW-ACTIVE-WIDTH 102 & PROOFW-ACTIVE+NOS NIL & PROOFW-ACTIVE+NOS-WIDTH 102 & EDWIN-TOP-WIDTH 102 & EDWIN-CURRENT-WIDTH 102 & EDWIN-VPFORM-WIDTH 102

In editor can do
expand= & lnorm
--------


Put a memo about this in the Tps User Manual under library:
How to set up the library initially

How to update library files on various computers.
virtual users andrews-at-itps
cebrown-at-home
etc
Always copy *.rec files as well as changed *.lib files
when updating
All the users are in default-lib-dir or backup-lib-dir,
but where you are  determines which is where.

Example:
afs/andrew/mcs/math/TPS/tpslib/andrews-at-itps is there
(set-flag 'backup-lib-dir '(
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/mbishop/"
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/cebrown/"
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/chrisb/"
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/hwxi/" 
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/huilong/"
"/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/andrews-at-itps/"

Add a little documentation about SILENT LOAD. Be sure it's
in the index
CEB			SILENT LOAD			2001 Mar 26

Made Silent Load depend on an environment variable TPS_SILENT.
To use silent load, first do "setenv TPS_SILENT T".
========================================================================

-----------------------------------------------------
--------------------------------------------------------------
Set up cmucl on htps like gtps
--------------------------------------------------------------
               ONLINE FILES

Running remotely, TPS should not save any files.

SAVEPROOF in particular still saves a file into the dir
where tps is running (/home/theorem/project/tpsonline).
---------------------------------------------------------------
Need to reorganize TPS commands into a tree-stucture well
suited to menus. Have Java and regular TPS basically the 
same in this regard.
Decide how contexts relate to this

tpsonline needs much better organization of menus


Have an EXECUTE-COMMAND command which permits one to
bypass menus. Just call it EXC?
------------------------------------------------------
When one uses tpsonline logged in as an expert,
the COMAND command doesn't work properly
------------------------------------------------------
                    EXPERTFLAG

With expertflag nil, we cannot load a theorem from
the library when doing a prove.  EG,

<1>expertflag
EXPERTFLAG [T]>nil


<2>prove thm2
THM2 is not a known gwff. Search for it in library? [Yes]>
2 items called THM2 found. They are as follows:
1) GWFF in file cebrown\shared\lib\thm.lib
2) GWFF in file library\distributed\thms0.lib
3) None of these.
Input a number between 1 and 3: [1]>
THM2 is not a known gwff. Search for it in library? [Yes]>
2 items called THM2 found. They are as follows:
1) GWFF in file cebrown\shared\lib\thm.lib
2) GWFF in file library\distributed\thms0.lib
3) None of these.
Input a number between 1 and 3: [1]>

Some notes about this:

* TPS used to treat lib gwff's and abbr's as weak labels:

MB              WEAK LABELS                             Aug 7th, 1995
If an object was defined as both a weak label and an abbreviation,
TPS used apply-label on it first and then crashed because it wasn't
applicable. So now the library removes the FLAVOR property when an
abbreviation is loaded.
Changed: library.lisp

* The code for gwff-p in wfftst.lisp can loop by calling go-fetch-gwff,
then getwff-subtype which calls get-only-rwff and ends up calling gwff-p
again (with "looping" NIL).  I can easily fix this by having a global var
gwff-p-looping instead of an optional argument.

* Even with the loop fixed, a nonexpert still cannot prove a library
theorem because when the library gwff is loaded the function
define-permanent-objects in lib-ops.lisp doesn't do a deftheorem.
This is intentional, since we didn't want nonexperts to be
able to ASSERT library theorems.

 - cebrown 4/1/02

Uses of EXPERTFLAG - 4/2/02

*** Defining and setting expertflag
maint.lisp:(defflag expertflag
maint.lisp:  (setq expertflag new-value))
review.lisp:             (when (get flag 'pre-change-fn) ; cebrown - 10/29/00 (see EXPERTFLAG for an example with a PRE-CHANGE-FN)

*** Allowing users to execute lisp commands from command lines

* executing lisp commands from top level command line
top.lisp:                ((null expertflag)
top.lisp:              ((null expertflag)
top.lisp:       ((and expertflag (null (cdr cmd)))
top.lisp:       ((null expertflag)

* misc-interpreter and consp-interpreter are used by several top levels
* to allow execution of lisp commands from command lines.
top.lisp:       (cond ((null expertflag) (throwfail "Unknown command for flag.")
)
top.lisp:   (cond ((null expertflag) (throwfail "Unknown command or flag."))

* Help for utilities - about executing lisp fns from the command line
mhelp.lisp:used from the TPS prompt unless you have EXPERTFLAG set to T."))

* (GRADER) grade-command-interpreter - Controls whether a GRADER user can execute
*  lisp commands
grades1.lisp:  (declare (special expertflag curr-cmd))
grades1.lisp:            ((null expertflag)
grades1.lisp:          ((null expertflag)
grades1.lisp:   ((and expertflag (null (cdr cmd)))
grades1.lisp:   ((null expertflag)

* interpret-prfw-top: lisp execution from prfw command lines
prfw.lisp:               ((null expertflag)
prfw.lisp:             ((null expertflag)
prfw.lisp:      ((and expertflag (null (cdr cmd)))
prfw.lisp:      ((null expertflag)

* report-interpret: lisp execution from report top level command lines
report.lisp:  (declare (special expertflag))
report.lisp:           ((null expertflag)
report.lisp:    ((and expertflag (null (cdr cmd))) (car cmd))
report.lisp:    ((null expertflag)

* lisp execution from review command lines
review.lisp:  (declare (special expertflag))
review.lisp:           ((null expertflag)
review.lisp:    ((and expertflag (null (cdr cmd))) (car cmd))
review.lisp:    ((null expertflag)

* interpret-step-top - allows execution of lisp commands when restoring a work file
*  in step mode.
save-work.lisp:          ((null expertflag)
save-work.lisp:        ((null expertflag)
save-work.lisp: ((and expertflag (null (cdr cmd)))
save-work.lisp: ((null expertflag)

* lisp from test top level command line
test-top-top.lisp:  (declare (special expertflag))
test-top-top.lisp:        ((null expertflag)
test-top-top.lisp:      ((and expertflag (null (cdr cmd))) (car cmd))
test-top-top.lisp:      ((null expertflag)

* executing lisp from unify command line
unif-top.lisp:                ((null expertflag) (throwfail "Unknown Command."))
unif-top.lisp:  ((and expertflag (null (cdr cmd)))
unif-top.lisp:  ((null expertflag)

* library-command-interpreter - controls whether the user can execute lisp commands
library1.lisp:           ((null expertflag)
library1.lisp:    ((and expertflag (null (cdr cmd))) carcmd)
library1.lisp:    ((null expertflag)

* executing lisp commands from unix-lib command lines:
unix-library1.lisp:              ((null expertflag)
unix-library1.lisp:       ((and expertflag (null (cdr cmd))) carcmd)
unix-library1.lisp:       ((null expertflag)

* experts can reference lisp variables using $ on the command line,
* eg, if A is bound to "foo", then the command
* <n>echo $A
* is equivalent to echo "foo" if expertflag is T
* and is echo $A if expertflag is NIL
linereadp.lisp:  (if (and do-flag-subs expertflag tokens)

* ifthen-tactical-fn - experts can use arbitrary lisp commands in the
* condition of an ifthen tactical.  nonexperts can only use a tactic
* as an ifthen condition.
tacticals.lisp:              (if expertflag (eval test)))))

*** Startup

* potential experts have expertflag set to T when the patch file is loaded
tps3-save.lisp:        ;; changed further so that the expertflag is set only if the user is an expert.
tps3-save.lisp:    (let ((old-expertflag expertflag))
tps3-save.lisp:            (setq expertflag (or (eq expert-list t)
tps3-save.lisp:        (setq expertflag old-expertflag)))))
tps3-save.lisp:      (let ((old-expertflag expertflag))
tps3-save.lisp:              (setq expertflag (or (eq expert-list t)
tps3-save.lisp:          (setq expertflag old-expertflag)))))
tps3-save.lisp:      (let ((old-expertflag expertflag))
tps3-save.lisp:              (setq expertflag (or (eq expert-list t)
tps3-save.lisp:          (setq expertflag old-expertflag)))))

* potential experts can load a personal .ini file
tps3-save.lisp:     (let* ((expert-flag (or (eq expert-list t)
			     (member (status-userid) expert-list :test #'string-equal)))


*** Library Fetching

I think there's a bug here - it appears nonexperts should create a weak
label when fetching.  This happens but gets undone.

Possible fix:
library2.lisp:  (when expertflag (remprop name 'flavor))

* When retrieving a GWFF or ABBR, do a deftheorem only if expertflag is T.
* For GWFF's do a def-abbrev if expertflag is T.
* These are questionable - prevents prove prompt fetch's & asserts.
lib-ops.lisp:   (when expertflag
lib-ops.lisp:   (when (and expertflag (eq (cadr (memq :type item)) 'gwff))

* fetch
library2.lisp:  (mhelp "Make a library object available in TPS.
Will create a new TPS object if EXPERTFLAG is set to T, otherwise
will create a weak label for the new library object.
If more than one library object of this name is stored in
the library and SHOW-ALL-LIBOBJECTS is set to T,
the user is prompted to disambiguate.")
unix-library1.lisp:Will create a new TPS object if EXPERTFLAG is set to T, otherwise


*** Combining Proofs

* merge-proofs, transfer-lines - experts can merge two proofs more liberally, see the help messages
saveproof.lisp:proof. If EXPERTFLAG is NIL, no line number may occur in both proofs.
saveproof.lisp:If EXPERTFLAG is T, then if a line number occurs in both proofs, the
saveproof.lisp:If EXPERTFLAG is NIL, no line number may occur in both proofs.
saveproof.lisp:If EXPERTFLAG is T, then if a line number occurs in both proofs, the
saveproof.lisp:     (if (not expertflag)
saveproof.lisp:                    "Cannot merge them while EXPERTFLAG is NIL.")

*** Saving/Restoring Proofs

* experts can restore saved proofs under a different name if there's a conflict
saveproof.lisp:     (when (and (not expertflag) (proof-lines ,prfname))
saveproof.lisp:     (when (and expertflag (proof-lines ,prfname))

* nonexperts can't restore saved proofs if their "easy-code" doesn't match the proof's code
saveproof.lisp:     (when (and (not expertflag)

* experts apparently can restore a proof that does not have the assertion wff saved
saveproof.lisp:     (when (or expertflag (not (proof-assertion ,prfname)))

* write-saved-proof saves proofs differently for experts vs nonexperts
* differences:
*   experts can save proofs under a different name
*   experts can save abbrev's with proof
*   nonexperts save a real code while experts simply save "0" as the code
saveproof.lisp:      (if expertflag


*** Verbosity

* load :verbose

boot0.lisp:     (qload ,filename :verbose expertflag)

* category-items-short-help, category-items-help: along with the
*  flag show-all-packages controls whether ?/?? at the prompt
*  for the ENVIRONMENT command will show all symbols or only accessible symbols
mhelp.lisp:     (when (or (and show-all-packages expertflag)
mhelp.lisp:     (if (or (and show-all-packages expertflag)
mhelp.lisp:                 (if (or (and show-all-packages expertflag)
mhelp.lisp:     (when (or (and show-all-packages expertflag)

* assert automatically gives more help to nonexperts
otl-schema2.lisp:         (when (or (not expertflag)

* In principle, print-*-tps-top prints "[Command aborted.]" for nonexperts 
* but I'm not convinced this ever happens.  The cases I tried, print-*-tps-top
* is always called with argument result=NIL.
top.lisp:  (cond ((not expertflag)


*** Less Important

* qload compiles the source code if expertflag is T - see the help for qload
boot1.lisp:;;; This is always bound in qload depending on its arguments and expertflag
boot1.lisp:     (*allow-compile-source* (and expertflag compile)))
maint.lisp:                  (2.1.2.1) if the flag 'expertflag' is NIL, always load the uncompiled
maint.lisp:                  (2.1.2.2) if the flag 'expertflag' is T, ask user whether load the uncompiled

* *stupid-flag-list* (ha!) includes EXPERTFLAG to indicate that
* the user can't vary it during the test-top run.
test-macros.lisp:       'QUIET-EVENTS 'RULE-ERROR-ENABLED 'RULE-ERROR-FILE 'SCORE-FILE 'COMPILED-EXTENSION 'EXPERTFLAG

*** Unused Files/Commented references
commands-interpreters-core.lisp:       (cond ((null expertflag) (throwfail "Unknown command for flag."))
commands-interpreters-core.lisp:   (cond ((null expertflag) (throwfail "Unknown command or flag."))
edtop.lisp:                (cond ((null expertflag)
edtop.lisp:              (if expertflag
edtop.lisp:             ((null expertflag)


--------------------------------------------------------------

Put a memo about this in the Tps User Manual under library:
How to update library files on various computers.
virtual users andrews-at-itps
cebrown-at-home
etc
Always copy *.rec files as well as changed *.lib files
when updating
All the users are in default-lib-dir or backup-lib-dir,
but where you are  determines which is where.
-----------------------------------------------------------------
Check out latex documentclass prosper.cls for slides with 
flow charts etc. used by Benzmuller
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/prosper/prosper/?sortby=date#dirlist
prosper.cls
%% Copyright 2000-2001 Frédéric Goualard and Peter Møller Neergaard
----------------------------------------------------------------------
--------------------------------------------------------------
Track down the function EXIT-INFERIOR-TOP, called from
certain places in the code but not defined in TPS???
--------------------------------------------------------------
	FIX UP TPS WEB PAGE AND DISTRIBUTION

Fix up section on building tps in User Manual to
accomodate Windows Users

Add some examples to tps-eg.html and restore the link
from tps.html

Andrews revise the http://gtps.math.cmu.edu/tps-about.html
web page to  update the mention of Andrews book.

=========================================================

		SYMSIMP

In symsimp.lisp, the function carry-out-deletion-rewrite
needs to be extended to handle LAMBDA rewrites and others.
I think the LAMBDA case can be handled almost exactly
like the AB rewrite case.
The way it handles EQUIVWFFS may no longer be general
enough as well.

An example of a bug this will fix is THM144B
with MODE-THM144A and DEFAULT-TACTIC PFENNING-TAC.
============================================
	SAVEPROOF should offer to save the proofs of lemmas too.
etc.

RESTOREPROOFS

========================================================
	New name for ASSERT for lemmas?
LEMMA (use-lemma?)
Adjust NAT-ETREE.



==============================================

what kind of argument can one give SET-BACKGROUND-EPROOF?
Help message should explain, or give an example.
Is there an eproof list? (See Also, EPROOFLIST, NAT-ETREE, MS98-TRACE)
===============================================================================
Bug using TRACE with Lemmas - TRIVEXT1
    77  prove trivext1 
    78  diy ! 
    79  mode ms98-ext-mode 
    80  diy ! 
    81  nat-etree 
    82  prove trivext1 
    83  ms98-trace (MATING)  ; this works fine
    84  diy ! 
    85  ms98-trace (MATING MATING-FILTER)  ; search fails?  why?
    86  prove trivext1 
    87  diy ! 
    88  history 
===============================================================================
Change history to show the args to the commands.
===============================================================================
           UNIFICATION

Add operations to the unification tree to do
deterministic parts (like substitution for dpairs <u,F>
or pattern parts).
===============================================================================
  PUT IN IGNORE DECLARATIONS WHEN THE MOOD STRIKES


Thu Oct  4 13:12:08 EDT 2001
;;; Compiling file /home/theorem/tps/lisp/ftree-seq.lisp
; While compiling PRINT-FTREE-SEQ:
Warning: Variable K is never used.
; While compiling FTREE-SEQ-INVERT-POSITION:
Warning: Variable PREM2 is never used.
; While compiling FTREE-SEQ-TO-PROOF-REC:
Warning: Variable WFF2 is never used.
Warning: Variable WFF1 is never used.
;;; Writing fasl file /home/theorem/tps/bin/ftree-seq.fasl
;;; Fasl write complete
;   Fast loading /home/theorem/tps/bin/ftree-seq.fasl
;;; Compiling file /home/theorem/tps/lisp/ceb-nat-etr.lisp
; While compiling PROOF-LINE-TO-NATREE:
Warning: Variable AB2 is never used.
; While compiling MAP-EPROOF:
Warning: Variable CONN-NODES is never used.
; While compiling MAP-TO-CORRESPONDING-NODES:
Warning: Variable NODE1 is never used.
; While compiling (:INTERNAL MAP-TO-CORRESPONDING-NODES-2 2):
Warning: Variable E is never used.
; While compiling (:INTERNAL MAP-TO-CORRESPONDING-NODES-2 1):
Warning: Variable E is never used.
; While compiling (:INTERNAL MAP-TO-CORRESPONDING-NODES-2 0):
Warning: Variable E is never used.
; While compiling FILL-IN-CASES-GAP:
Warning: Variable DN is never used.
;;; Writing fasl file /home/theorem/tps/bin/ceb-nat-etr.fasl
;;; Fasl write complete
Warning: While compiling these undefined functions were referenced:
         AUTO::NATREE-TO-FTREE-NORMAL from position 96785 in
           /home/theorem/tps/lisp/ceb-nat-etr.lisp
========================================================
Ask Florin about Menus under Unix.

Check the web site to see if Allegro has IDE for Linux.

We sent them email.

Allegro Composer

http://www.franz.com/products/integrated_dev_env/index.lhtml

Allegro CLIM (Common Lisp Interface Manager)

http://www.franz.com/products/gui_tools/index.lhtml
=========================================================
Create flag SAVE-TPS-TEST-PROOFS

=========================================================
	TPS for windows


modify user manual
TPS web site

check cygwin.

============================================
	FACILITIES FOR CLASSIFYING LIBRARY ITEMS
============================================

============================================

	COMMANDS TO DISPLAY IMPORTANT PROPERTIES OF ETREES

duplications
Expansion terms (in an informative way - etr-info)

Set constraints information . . .

Update help message - explain what this does.

============================================
We should think about using cvs since we both
have copies of the tps files on our machines at
home.  cvs can check what files need to be updated,
and can check for conflicts when there have been
two different modifications to a file.

This would help us keep the lisp files and
the libraries up to date.

Here are a few cvs commands before I forget them:
cvs update <dir or file>  (to make sure the copy 
     has the latest files and check for conflicts)
cvs commit <dir or file>  (to "check in" a new copy that
     others will get when they update)

Chad

=========================================================
	change-keywords* command

Have a keyword that indicates when a thm needs setsubs.  
(I've done this: NEEDS-SETSUB.  I'm in the process of giving
this keyword to gwff's.)

Also, could have keywords for requirement ext/choice/descr, etc.

Have it check the proof when I do daterec.
Also, have it go through proofs directory.

(See scan-setsubs utility for code to determine if a proof
uses a setsub.)
===============================================================================
Design a method to update libraries on different computers.

Is there an efficient way to copy 
theorems
definitions
modes
from my tps library at home to that at cmu?
Can we devise one?

Have a tps comand to integrate a file into the library
Have a tps command to integrate libraries on different
computers, perhaps asking the user some questions as it does this.
===============================================================================

	Master Plan for making it easier to find
	modes to prove theorems automatically

Program to normalize ND proofs, so that nat-etree 
will work on them. In principle, transform proofs into sequent-style
proofs, and apply cut-elimination techniques. Maybe can actually 
avoid this transformation step.
NAT-ETREE now includes a cut elimination algorithm.
Do more testing of this.

Command to compute the quantificational depth of expansion proofs.

Make NAT-ETREE work on all normalized proofs. 
see what is in the command nat-etree-old; preserve what
is useful (perhaps as a variant of nat-etree, which is
controlled by a flag), and get rid of the command
nat-etree-old.  NAT-ETREE with NAT-ETREE-VERSION CEB
should work on all normal ND proofs.

Cut elimination for expansions proofs (use ftrees - rewrite
ceb-nat-etree code to use ftrees).  Need merging (and possibly other
operations) for ftrees.  We now have merging for ftrees
and a sequent calculus with cut elim (ftree-seq.lisp).
Sequent calculus derivations translate to ftrees with complete matings.

Keep improving  ETR-AUTO-SUGGEST
It should sometimes suggest PR00.
Might suggest several choices.
One improvement would be to distinguish
between depth of setsub instantiations
and other instantiations we expect will
be the result of unification during mating search
(PR00-MAX-SUBSTS-VAR vs MAX-SUBSTS-VAR).

Have an expansion option as something that can be
produced by  ETR-AUTO-SUGGEST, saved in the library,
and applied in one step to the initial etree.
Now, we can save etrees (as ftrees) in a file
and restore them using SAVE-ETREE & RESTORE-ETREE.

Have a program that will run through the generation
of expansion options looking for a particular one
(or is a superset of the one we are looking for)
and tell us how many options it had to try first.

Develop PRIMSUBS-SUGGEST which will use the above
facility to find a good way of setting primsub flags
when we have a paarticular option set in mind.

Need to be able to save matings in the library.

Given a mating we are trying to find, we need MS98-1
to be able to print out messages (and also put these
in a file) showing how the search procedure is faring in generating
this mating. It should show what parts of it have been
generated in each component.  (See MS98-TRACE)

Clarify the relationship between the unification top-level
and the unification used by ms98-1

We need a more sophisticated way to set flags affecting search We
should have a program like update which will ask us to make basic
decisions, and then ask us to set other flags only if those flags
would actiually affect the search. This should be done automatically:
the program should search through the lisp files and figure out which
flags should be set. When defining a flag, we might have to specify
whether it is a search flag or not.  Probably there should be a subject
containing all the search flags, and the update program would only
look at them.  (This is partially implemented and released using
flag dependencies and the command UPDATE-RELEVANT.  Over time
we should add flag dependency information in the defflag's.)

This master plan should (loosely) be the outline for a section in the User's
Manual about how to find flag settings if a ND proof for the theorem
is known.

=======================================================

Someday we should consider how adding EQUIV-EQ to TPS affects NAT-ETREE

=======================================================


Add more to the User manual on installing and starting up 
tps (and etps) core images. Also in the README file.

===============================================================================
     The answer to the question of how to start up tps after making a
core image depends to some extent on the version of Lisp you are
using, and you may need to consult the Lisp documentation to see how
to start up a core image. The core image produced by the "make tps"
command will be large, containing at least 5 megabytes, and maybe
several times that. You may need to use the Unix chmod command to make
it executable. and you may need to rename the file. Several examples
of how to start up tps are in section 12.4 of the User Manual. These
examples show how to start up tps in an xterm window, but they contain
useful information even if you don't want the xterm commands. For
example, If you are using CMULISP, the manual says to issue the
command
xterm -fn vtsingle -fb vtsymbold -e cmulisp -core tps &
but you could start up tps without the window with the command
cmulisp -core tps
Of course, you can define a convenient alias once you have
established the correct command.

=======================================================
Library commands such as sort should not affect the
file if there is a parse error - a copy of all the files
affected (eg, libindex.rec)
should be made so things can be restored to the previous
state.

Create new temporary versions of the files
If the initial file is called file, create a new version
called file.new. After this has been successfully created, 
cp file file.old
mv file.new file,
rm file.old
This way, if the machine goes down in the middle of things, 
there is always some old or new version of the file
left to work with.

=======================================================
create tex*-all-wffs library command
that shows needed abbreviations.
=======================================================

=======================================================

============================================
Create a new chapter in the User manual about
using TPS output in Latex documents
(vpt, texproof, etc) and lots of flags
to control this.
============================================
           USER MANUAL

Include info about Lemmas & Extensionality example
in the User Manual.  Chapter 2?

Add new chapter "Finding Modes" (after Ch 9) about how to
go from an interactive ND proof, NAT-ETREE, MAKE-EPROOF-CANONICAL,
BUILD-CORRESPONDING-MATING, then etr-auto-suggest
At beginning of Chapter 2 (Proving Theorems) should be
a ref to this chapter.  ("see Chapter -" after first sent 2nd par)
============================================
Should we ever have to call cjform, or
should this always be done automatically
at appropriate times.
--------------------------------------------
After interactive matings, merge-tree should
call complete-p rather than forcing user to do it.

Example:

;x0i       
 ! LEAF4  "
 %~Poi Y0i%
 %        %
 % LEAF5  %
 #Poi x0i $
Number of vpaths: 1


<Mate4>add-conn leaf4 leaf5
*
Adding new connection: (LEAF4 . LEAF5)  

<Mate5>merge-tree
MERGE-TREE not applicable.
Operation not performed.

<Mate6>complete-p

Mating is complete.

<Mate7>!mer
merge-tree 

==============================================

============================================
2001 March 13  PROBLEM WITH SKOLEM-DEFAULT SK3

Try "exists x . [forall y [P y]] or ~P x"
with SK3.  It finds a mating which does not translate
to a ND-proof because we cannot directly plug in x for y.
One way to fix this is to have merging duplicate
variables if needed when SK3 is used.

Another alternative is to add more general quantifier
ND-rules of inference so we can do UGen & EGen inside
the scope of prop conns (maybe just OR as in Andrews
book 30).
=========================================================================

===============================================
Problem with printing justifications of proofs in XTERM style.
See THM587.  UI: [x + y] gets printed as UI:[x
 + y]
My guess: In prtotl.lisp, justlength is returning a value
one less than it should in this case, probably
due to + being infix.  But it's not clear why
this is happening.  GENERIC style works and
appears to use the same code.
===============================================


                  FTREE DOCUMENTATION

Motivation for different representation.
Document ftrees - representations, operations,
translations with etrees, etc.
There is some documentation in the Prog Guide now.
===============================================================
Investigate the use of the global *banned-conns-list*.
Should we be banning these connections in general?
We can get away with banning them, because we don't need
dual instantiation.  However, one could imagine a situation
in which we want to mate a formula with one of its own subformulas.
Try to come up with an example.  
(See the new discussion of this in the programmer's guide.)

See STRANGE-HO-EXAMPLE --
this is an example of the form I wanted, but DUAL instantiation
does prove it, because it *does* allow the instantiation.
What's going on?
===============================================================
Design a utility to look at proofs to find instantiations
that have the same logical structure as a subformula
of the theorem.
===============================================================
rebuild/build etps on andrew machines

keep list of systems on Andrew on which etps/tps has been built
with dates and names of machines.

 i386_linux2 - gtps and htps use this sys, but do not call etps through andrew
               we don't know of any other machines that use it,
               so we have not recompiled.
unix45-49                     i386_rh60  (done 9/15/00)
                              sun4x_57   (done 9/00)

ibuprofen.weh.andrew.cmu.edu  i386_rh    (problem?)
(methadone.weh.andrew.cmu.edu)

http://www.cmu.edu/computing/clusters/equip/index.html
=============================================================================


Matings of nodes which are not leaves
  Facilities to do this interactively in MATE
  Translations to ND proofs (still need to extend RuleP for nonleaf conns)
  Translations of connected nodes equal only up to NNF (need an ND Rule for neg-normalizing)

TPS-Glossary of variables, slots, functions n the TPS code.
New slots for dependency relation need to be included


Clean up bugs in cut-elimination procedure for expansion proofs



Put  MS91-6 AND MS91-7 flags dealing with primsubs into PRIMSUBS
ADD REFERENCE TO USER MANUAL

Fix /home/theorem/tps/terminal-setting

================================================================
                   SETSUB (PRIMSUB) METHODS

Need to be able to combine methods for generating set variable
substitution in an intelligent way.
(Need a gensubs method which has at least all the capabilities of all
the current methods.)

Also, need to be able to have mating search interact with
generation of set variable substs (using dissolution is a start).

=====================================================================
                   ARGTYPES OF FLAGS  
            
Give flags which have argument type SYMBOL more specific
argument types (when appropriate)

=====================================================================
                    RELEVANCE INFORMATION IN DEFFLAGS

Add relevance/irrelevance information to many defflags
throughout the code.  (See the Prog Guide, Chapter on Flags)
=====================================================================
Look for ********* comments in prog/mating.tex
to update discussion on dep reln.
=====================================================================
                   RECOGNIZING NONTHEOREMS

Have command REJECT that tests wffs for easy tests of nonvalidity.

Could have DIY use this at the beginning.

=====================================================================

	Check this out:

Jens Otten  wrote a three (!!) - clauses PROLOG prover called leanCoP which can
be loaded down from his web-side. It consists in a straightforward
implementation of the matings, or in my terminology connection, method. The
surprising thing is that it is running extremely efficiently on the TPTP and
in several cases easily beats Otter, eg. The paper will be presented at the
Workshop on First-Order Theorem Proving in the next few weeks by Otten.
http://aida.intellektik.informatik.tu-darmstadt.de/~jeotten/
http://aida.intellektik.informatik.tu-darmstadt.de/~jeotten/leanCoP/
===============================================
      LSDIR

alias lsdir "ls -F !!:* | egrep /$"
===============================================

         ONLINE DOCUMENTATION HTML

The AUTO-DOC module should probably be included in ETPS
so that we can run html-doc without having to load
htmldoc.lisp ourselves.
=============================================
           SETUP

Look at setup* files in etps/demo-install
and see if any of this info should be included
in User Manual -- setting things up.

Read through Chap 12 and try to find a nice
way to have things organized.  Checklist at the end?
(New files for new versions!)
=============================================
           GET-SCORES DIST AND DOC

Put a copy of a version of get-scores in utilities.
And dirname

Comments in get-scores file, put grades directory
here(?), etc.  Also in etps.ini say <put grades dir here>.

See ~pa01/pba/etps.hlp on gtps and decide
what to put into Users manual (12.8).  (Temporary new
version until we discuss changes)
Also, see grader.hlp "comments to add to the Tps User Manual"

Should be a reference in Grader manual (Chap 4)
to Users manual discussion.
==========================================================================================
Other options for PRIMSUB-METHOD?
==========================================================================================

Help message for EQUIV-EQ-EXPD (and related rules)
should indicate dependence on REWRITE-EQUALITIES
=============================================
More facilities for editing proofs.
An example is thm531e.prf, make global
changes of variable names, possibly eliminating
some AB's.
=============================================
tableau doesn't handle RULEC in a reasonable way.
=============================================
SCRIPT doesn't show things on the screen, and directs
all the output to the script file which is being produced.
=============================================
[gtps]/afs/andrew.cmu.edu/mcs/math/etps/records/pa01% more etps-fall99.scores
(|pa01| X2107 16 86905 (100 5 11) (17 9 17))

Note that the year, which should be 2000, is 100 (99 + 1)
Created by Done command
===============================================
		TPS DISTRIBUTION
put items from bottom of grader.hlp (etc) into the
tps User Manual in section on setting up etps.
Also put get-scores into the tps distribution.
Improve it so people have less to do to set things up?

===============================================================

List-rules doesn't show add-hyps and delete-hyps and assert reulep
    -- This is because these are not inference rules in the sense of the others.
       In particular, there is no defsrule for the commands, and no priority given in ml1-prior.lisp.
       Note that RULEP also does not appear with list-rules.
       It's not clear how to form the code for a defsrule, as such code is usually created automatically
       from the corresponding .rules file.  In fact, if these are srules,
       help will look for help info in a corresponding .rules file.
       Discuss this with Andrews to decide what we want.  - Chad
Have list-rules use
global-mexprlist
(member '(rulep-test) global-mexprlist :test #'equal)
and decide which contexts are (special) rules and
have list-rules list those mexpr's
and list-rules* list the short-help t messages for those mexpr's
----------------------------------------------------------
x5304-bug00-5-5.prf in bugs file
====================================================================

Someday have a version of list rules that just lists the rules
relevant to proving or using given lines of the proof.
See if current code for GO, ADVICE,  and tactics is useful

============================================================
Y2K bug in GRADER
<Gr11>etps-grade
Please enter a list of exercises and scores. eg. (x6200 15)(X6201 20)
Type <return> if you only want to update the previous scores
:(x2110 44)

[MERGING ...
Please specify the due-date for 
X2110: 00 01 12

(0 1 12) is not in the format: yr mm da

2000 6 22 does work, so this isn't too serious
==================================================
help message for default-tactic
should indicate that complete-transform-tac
and pfenning-tac are the primary choices
(maybe the only that work).
==================================================================
Currently make-eproof-canonical fails on merged trees,
so it can only be used if we call nat-etree-old
(since nat-etree now does merging at the end).
make-eproof-canonical should be more robust.
==================================================================
Need a check for whether an eproof already is canonical.
==================================================================
Need to automate the process of checking that all the required unifiers 
are in the list of generated unifiers.

The value of MS98-TRACE should also optionally include the symbol SUBSTS
SUBSTS would tell it to check that
all the substs in the current eproof were generated at the
beginning of the search.  (Also, there's another problem.
unify returns four values, the last of which is apparently
the success node that has the unifying substs, but
we aren't apparently SAVING this node anywhere.
See the code for unify in unif-tree.lisp and the
code for go-unify in unif-user.lisp) 
==================================================================
           MS98-TRACE

The tracing is claiming that TPS fails to combine good components
even when the good components are being formed.  Presumably
this is due to subsumption.  This needs to be fixed.

=======================================================
Set SMART-LOAD T at beginning of patch files and NIL
at end.
Put note in jobs-done file explaining why

copy /afs/andrew.cmu.edu/mcs/math/etps/common/etps.ini
to all the etps.ini files, with suitble comments and adjustments

------------------------------------------------------
Set up tps distribution files with ini files, get-scores, etc.,
and more documentation in the user's manual on how to use them
Some useful information is in the bottom of grader.hlp

grader.ini should be included in the distribution and mentioned

The ini files in /afs/andrew.cmu.edu/mcs/math/etps/demo-install
may be good models, except that lots of junk should be taken
out of them.
They do need to have examples of everything people might want to 
have in them, at least as commments.

/afs/andrew.cmu.edu/mcs/math/TPS/admin/etps-scores/dirname
is essential to making get-scores work
--------------------------------------------------------------------

Get more information about why it takes so long for Matt's
procedure to compute all the unifiers for the initial connections.
Time how long it takes to do one of them.

Keep working on analyzing whether we can prove a hard theorem,
and how long it should take.

Use dumplisp to save a core image (excl:dumplisp :name "blah.dxl")
(see tops20.lisp tps3-save for an example)
[gtps]/home/pa01% mv testdumplisp testdumplisp.dxl
[gtps]/home/pa01% lisp -I testdumplisp.dxl
This should save redoing lots of initial computations.
Test this on a simple example.  Document how this works
and send it to Andrews for inclusion in his lisp.hlp
file.

Test PARITY1 using TPS-TEST2. Just run it in a fairly blind way.
Can we find any interesting examples where it makes a difference?

The description of TPS-TEST2 should be improved a bit
to make it clear that many theorems are tested.

Can we make MEASUREMENTS more sophisticated and useful?
an we devise good measures of the complexity of an
expansion proof?

Install the flag MEASUREMENTS in the subject library, or
make a new subject.
Improve help message

Write User Manual section (with example) on how to use:
MAKE-EPROOF-CANONICAL and related commands

Write User Manual section (with example) on how to use:
  MS98-TRACE 

TRY DUAL-EG1 as a simple example.  Other simple examples
are in mbishop/dual.lib

Implement the NAIVE1 search procedure as a top-level command
Describe what it does
Keep a list of examples where it works: try x21??, some Boole-prop examples

=================================
===============================================================================
        RESTOREPROOF

The following saved proofs do not have the def-abbrevs they need
in order to be restored.  We should fetch the abbrevs, restore the proof
(with restoreproof), then save the proof again "saveproof":

formbishop
gvb-*
thm108-b
thm131

I'm sure there are more too.  Probably best to write some code to
identify the prf files that have this problem.

=================================
Jobs and ideas in /home/theorem/project/papers/cade2000/tutorial-plans

-------------------------
Someday look at
/home/theorem/tps/terminal-setting
which is called by run-grader

============================

=================================================================


New values for REWRITE-EQUALITIES:
TRIPLE	Like LAZY2, but does both Leibniz and Extensional equality

====================================================
Add to keywords PSEUDO-FIRST-ORDER,
meaning there are higher order variables, but  there is a proof
in which  all the instantiations are trivial.

===============================================
		ETPS


On guest we get only the following help; apparently the lisp file is needed too.

help mp
File ml2-logic1a.rules has not been changed since building TPS3.MP is an inference rule and a top-level command.

-------------------------------INFERENCE RULE--------------------------------
Its priority is 4

----------------------------TOP-LEVEL COMMAND <n>----------------------------
Modus Ponens.
The command format for MP is:

<n>MP   D2   D3   P1    B    A   D2-HYPS  D3-HYPS  P1-HYPS 
       line line line gwff gwff linelist linelist linelist


The arguments have the following meaning:
D2 : Line with Implication
D3 : Line with Succedent of Implication
P1 : Line with Antecedent of Implication
B : Succedent of Implication
A : Antecedent of Implication
D2-HYPS : Hypotheses
D3-HYPS : Hypotheses
P1-HYPS : Hypotheses


<1>short-help
SHORT-HELP [NIL]>
gc: E=86% N=508624 O+=139296 pfu=457+63 pfg=17+182
==============================================================


	Setting up guest account on GTPS
	SETTING UP USER'S DIRECTORIES

The default shell (bash) doesn't like the setenv commands in the TPS
initialization files; type 
chsh <return>
/bin/tcsh
to change your default to tcsh (as it is on FTPS/DTPS).


printenv
SHELL=/bin/tcsh

.tcshrc contains shell commands

You may need to adjust tps3.ini, .tcshrc, and .login files
Did adjust .alias after copying it from $afspba/dotfiles/.alias
source .alias is in .tcshrc

 Towards the end of .tcshrc  added the line:
source /home/theorem/tps/.tpsrc
Now the commands tps3, xtps3 and xtps3-big work on GTPS.

There is now a generic alias file for tps: 
/afs/andrew.cmu.edu/mcs/math/TPS/admin/aliases-tps.
On gtps and htps there is a copy of this file as ~theorem/.aliases-tps.
This should be sourced by each user's .tcshrc file.  Also, there
is another alias file specific to gtps: ~theorem/.aliases-gtps.
This should be sourced by each user's .tcshrc file on gtps.

It looks as though you need at least the following setting for PATH in
your .tcshrc:
setenv PATH /bin:/usr/bin:/usr/X11R6/bin:/usr/local/bin:/usr/local/bin/i486-unknown-linuxelf:/usr/bin/mh:/usr/local/kerberos/bin:/usr/local/zephyr/bin:/usr/acl4.3/bin:.:

	X window manager

Copied the file /etc/X11/xinit/Xclients as .Xclients in my home
directory, and added  just after the rm command pair near the top of .Xclients
the line
xset +fp /home/theorem/tps/fonts

put into .Xdefaults:
*saveLines: 1024
*savedLines: 1024
so that one can scroll farther back in windows

.tcshrc on gtps contains the line
umask 0
which allows everyone (who has access to the computer)
to write; the normal setting would be
umask 2
but we don't have our group set up on gtps.


Read
/home/theorem/project/dist-for-us/tps-demo-files/README
Add to this as appropriate.

in guest account
cp -r /home/theorem/project/dist-for-us/tps-demo-files .
delete or edit demos.hlp

Write directions on logging in to gtps as guest
/home/theorem/project/doc/etps/etps-andrew.mss tells how to use begin-prfw.
emergencies

adjust
Makefile         run-tps3allegro  tps3.ini 

===========================================================
=======================================================
		TPS GETS TIRED
trying to prove X5204, THM196B, and THM143B
in succession. The last one didn't find a mating at all,
INDEED, WE HALTED WITH A BUG WHEN WE TRIED EXPUNGE AFTER EACH PROOF.
but with a fresh core image there was no problem.

There's a similar problem proving THM532, THM533, then
THM560.  The last one fails with a merging bug,
apparently in prettify, caused when a certain variable
name is chosen to be "y" which is confused with another
variable in the etree.  
====================================================


	The help messages for some of the rules of inference are
really very inadequate. They need to be improved.
Perhaps this requires some changes in the way the rules
package is set up.
	The command list-rules should have a mode of operation where it
display the help messages too.
===========================================================
		SET NOTATION
	Get the parser to write and read
{x | P }, and eventually {t | P }, where t is any wff.
===========================================================
Add to keywords PSEUDO-FIRST-ORDER,
meaning there are higher order variables, but  there is a proof
in which  all the instantiations are trivial.
===========================================================
	We need some rough estimates of the size of problems,
so that we at least have a general idea of how big a search
space our mating procedures can handle.
Introduce flags:
leafcount
num-of-vpaths
num-of-connections (MS98-1 computes something like this.)
These can be flags we can put into RECORDFLAGS but which are
set by TPS when it expands the wff
===========================================================
	New heuristic for MS98-1 (proposed 2000 March 23)

Prefer larger fragments, since the minimal components which
block them have more connections, so the mating will grow
faster. Perhaps combining larger components will cause
incompatibilities to show up quicker, which might counteract
a loss of minimizing branching.
	See how t actualy works in practice.
===========================================================
	Someday our procedures should allow mating of arbitrary
nodes of the expansion tree, or at least quantifier nodes
as well as the current leaf nodes. Deepen the tree using 
dual "instantiation" of such nodes.
===========================================================
               TEXPROOF

Someday it would be nice to get texproof to use Chad's
version  of texproof when PPWFFLAG is T.

	texproof should put a few spaces in wffs better.
Binary connectives should have spaces before and after them.
Note in particuar IMPLIES NOT

TURNSTILE-INDENT-AUTO should work for the tex/tex-1 styles
does for other styles.

===========================================================
FLUSHLEFTFLAG doesn't appear to be used at all????
The intent is that we not indent arguments to connectives.
===========================================================
The help messages for equiv-eq-expd and  equiv-eq-contr 
should make it clear that the behavior of this command depends on the
setting of the flag REWRITE-EQUALITIES
==========================================================


Move the files from springer into a new directory
/home/theorem/project/papers/llncs (unless we already have such a
directory somewhere; if so, do what is appropriate, such as deleting
whatever is obsolete) and link the file(s) we actually need into
/home/theorem/project/papers/cade2000
Add the date to the text of read.me
========================================================
Is there a way to suppress gc messages so we can see the signiicant
output?
========================================================
DATEREC should not insist on recording timing information;
we might just be updating the status of keywords or
adding a comment
========================================================
If you prove theorems automatically and print each proof
with texproof, the timing information from the first
proof seems to get printed for the next proof(s).
========================================================
	BELL
The bell is supposed to sound when TPS finishes a diy proof,
but I haven't heard it lately.
========================================================
<72>style
STYLE [WRITE-TO-FILE]>generic


<73>help dev-style
DEV-STYLE is an argument type.
This specifies the style for the output file.
Currently any of: 
CONCEPT: concept concept-s 
PRINTING: generic-string scribe 
REVIEW: generic 
SAIL CHARACTERS: sail 
TEX: tex tex-1 
X WINDOWS: xterm 
===============================================
         PROGRAMMERS MANUAL INDEX

For some reason the index to the Programmers
Guide is in italics.  Fix This.
See jobs in newdoc in the doc/prog directory.
===============================================
mode mode-thm196-try2 
     1  num-of-dups 
     2  primsub-method 
     3  prove thm196 
     4  mate 
     5  name-prim 
Note that substitutions appear for variables that are not
set variables.
========================================================================
                    HELP FOR ARGTYPE's

This is what we get when we call help dev-style:

DEV-STYLE is an argument type.
This specifies the style for the output file.
Currently any of: 
CONCEPT: concept concept-s 
PRINTING: generic-string scribe 
REVIEW: generic 
SAIL CHARACTERS: sail 
TEX: tex tex-1 
X WINDOWS: xterm 

Apparently, the values of type "DEV-STYLE" are:
concept, concept-s, generic-string, scribe, generic,
sail, tex, tex-1, and xterm.  The help message partitions
these values based on their context (e.g., CONCEPT, PRINTING,
etc.).

There's no bug, this is just the way help works.
It is a little confusing though.  Maybe we should 
think about changing this. 
=================================================================
	Improve AUTO-SUGGEST

AUTO-SUGGEST automatically removes all uses of SUBST=
and SYM= from the proof. It should also remove REFL=.

/home/pa01/theorem-dec99/proofs/complete/x5309.prf
obviously needs primsubs, but auto-suggest says it doesn't since it 
ignores the abbreviation.

========================================================
The keyword PROVEN or UNPROVEN should be more informative
and correspond to the choices one gets when one does 
daterec and updates "current provability".
Also, "show-keywords" should be more informative, say
which keywords can't be changed, and say how others are
changed. change-keywords should help mesage should refer to
that for show-keywords
========================================================
Add to help messages (if correct)
LINE-COMMENT and PROOF-COMMENT replace old comments
with new ones; they do not append the new comments to the old ones.
=========================================================
	A ? at the top level of TPS gives a list which ends
as below; it should be in alphabetical order

RULEP: rulep 
RULES MODULE: assemble-file assemble-mod build write-rule 
SAVING WFFS: append-wff append-wffs 
SAVING WORK: execute-file findproof finish-save pause restore-work 
     restoreproof resume-save save-flags-and-work save-subproof save-work 
     saveproof script stop-save unscript 
SEARCH SUGGESTIONS: auto-suggest etr-auto-suggest 
STARTING AND FINISHING: alias cleanup done exercise exit news prove 
     reconsider remark summary unalias 
STATISTICS: daterec display-time 
STATUS: are-we-using count-lines pstatus sponsor subproof unsponsor 
SUBSTITUTION RULES: substitute typesubst 
TACTICS: echo use-tactic 
TOP LEVELS: begin-prfw do-grades ed end-prfw history lib mate mtree pop 
     push review test uniform-search uniform-search-l unify 
UNIFICATION: least-search-depth 
VPFORMS: close-matevpw open-matevpw 
SUGGESTIONS: advice check-structure go go2 monstro suggest 
===================================================
etree-nat fails on x5309-g
===================================================

tps computer environment
is the master directory listing of files done?
===================================================
		TYPESUBST
TYPESUBST is not in any rules file, so in the
facilities guide, TYPESUBST is listed as a mexpr,
but not as an inference rule.
It should be just like SUBSTITUTE if this can be done
without too much effort. Otherwise, just list it as a
special rule, like rulep.
==================================================================
	The script command isn't working quite right
at the moment, since one doesn't get a proper tps prompt when 
making a script file.
===============================================

====================================================
Add bestmodes to /afs/andrew/mcs/math/TPS/tpslib/common
so they will be part of the tps distribution
====================================================
Command USE-THM taking a gwff and lines to be
matched to hypotheses, and gives conclusion as a new line
(maybe as in RULEP -- maybe as in DIY-L).
Maybe two different versions (one using general search
where conclusion is pretermined, one which pattern
matches and has conclusion as new lines).
==================================================================
TPS starts up with the message
(c) Copyrighted 1988-1991 by Carnegie Mellon University. All rights reserved.
How do we get this to be continually updated?
=================================================

	SAVE
The editor SAVE command doesn't let one use a name for
a wff which has already been used. It should simply warn one
and give one a chance to use a different name.
=============================================
	A proof should have the name of the theorem, if there is one.
=======================================================
	More sophisticated version of MODEREC

===============================================
	Fix Test top-level so it can use Matt's search procedure
===============================================
	ADD TO GRADER MANUAL
near end of the section
Automatic Grades

Here's an example. We specify that the exercises X2106 and X2107,
which have aliases E1 and E2, are due 1999 October 13.

<Gr1>due-dates
ID A B D C E G H F T1 T1L MID J K 
Please type the names of the exercises(exe1 exe2 ...): E1 E2

Please specify the due-date: 
E1:  99 10 13
E2:  99 10 13
The old file "logic.grades" has been renamed to
"logic.xgrades".
Creating new copy of file "logic.grades".
Written file logic.grades.

<Gr2>aliases
ID A B D C E G H F T1 T1L MID J K E1 E2 
Please type the (short) names of the exercises: E1 E2  
Please specify the alias (the actual name): 
E1: x2106

E2: x2107

<Gr3>etps-grade 
Please enter a list of exercises and scores. eg. (x6200 15)(X6201 20)
Type <return> if you only want to update the previous scores
:(E1 5)(E2 8)
=====================================================

nickname
put a flag in tps like localname so we can name
the current gtps to be gtps2
Make it part of system, and put it in recordflags.
Put it in the ini file on gtps2

=======================================================
From: "Scott E. Fahlman" <sef@cs.cmu.edu>
Date: Fri, 22 Oct 1999 10:38:58 -0400
CMU Common Lisp has been taken over by an active group of freeware hackers
outside of CMU -- scattered all over the world, actually.  They have done a
port to Linux on Intel architectures and several other things.  (Not
straight Windows yet, as far as I know.)
See http://www.cons.org/cmucl/ for details and downloads.

dtps-theorem/theorem/bin% more  run-tps3cmu 
#csh -f
tcsh /users/theorem/bin/terminal-setting
umask 0113
/usr/local/bin/cmucl -core /users/theorem/tps/hp_cmucl/tps3cmu.exe $*


===================================================

Compare help messages for flags with those in Matt's thesis 
appendix. Update as appropriate

====================================================
PRIMSUB-VAR-SELECT should have an additional option 
which considers set variables which may become
the head of both positive and negative literals after
instantiation of other set variables.

For example, in the proof of THM535 the variable X 
should be instantiated with a primsub, but it only
occurs with both polarities after the variable s
is instantiated.
====================================================
Allow user to include abbreviations to include in
primsubs.  Maybe another setting for PRIMSUB-METHOD.
-----------
==========================================================

	The NEW-SEARCHLIST command in the test top-level
should offer to fetch the searchlist from the library as other TPS commands
using objects which might be in the library do. There may be some other 
commands in the top-level which also need similar fixes.

	The user manual needs to explain more clearly how to
create searchlists. Also, we need to be able to copy (and then edit) existing
searchlists. 

===============================================

	Tried AUTO-SUGGEST on 
/afs/andrew.cmu.edu/mcs/math/TPS/proofs/complete/thm4-interactive.prf
See if you can make it work.

===============================================
	Add to the User Manual, probably as a new short subsection
under 2.5 Interpreting the Output:

If you leave TPS running on a hard problem and go to another location and wish
to check whether TPS proved the theorem, you can look at the tail of the
MATEVPW file (provided you had TPS open one, or you executed the OPEN-MATEVPW
command).

===============================================
Check this and add it to the User Manual, section 12.7

Date: Fri, 07 Aug 1998 16:09:24 -0400
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>


I've added M<return> to the possible user interrupts; it shows the current
mating during a search.
===========================================================
	Note: T<return> works as described on page 20 of the
User's Manual with ms98-1.
	Following this with M<return> soon yields
Interrupting mating search.Error: Attempt to take the car of T which is not listp.
  [condition type: SIMPLE-ERROR]
[1] USER(1):

	Update section 2.5.2 of the User Manual

===============================================
The help message for ms98-1 should be modified to refer to Matt's
thesis and paper.
===============================================

		TPS User's Manual
Add refererence to Bishop's thesis and paper to section 1.3
Also mention the TPS web site in Chapter 1
===============================================
MULTIPLE INSTANTIATION
	REWRITE-DEFNS and REWRITE-EQUALITIES
	There should be a TRIPLE setting of 	REWRITE-DEFNS  which allows
one to have one copy uninstantiated, one instantiated with the Leibniz
definition, and one instantiated with the extensional definition.
	At the same time, a MULTIPLE setting for REWRITE-DEFNS
should be implemented.
	Then try tttp5311a again.
===========================================================

Is SKOLEM-DEFAULT NIL fully implemented and adequately tested for path-focused
duplication? [MB: It's certainly fully implemented and tested for the search itself.
Expand-etree, on the other hand, is still a little flaky -- we needed a whole new
routine for that, and it's rather more complicated than the standard expand-etree.
Translating with multiple duplications where one duplicated quantifier lies 
below another duplicated quantifier is probably the most obviously buggy part.
So the translation from jform to propositional etree is still buggy, but works 
most of the time.]

=============================================================

new CONCEPT flags which allow us to suggest abbreviations (including
polymorphic abbreviations) to the TPS search procedure

=========================================================


After running  tps-test with 
test-ms98, I found all the following files in my home directory:

-rw-rw-rw-   1 pa01     pa01            0 Apr  8 13:46 G1424.vpf
-rw-rw-rw-   1 pa01     pa01            0 Apr  8 13:46 G1425.vpf
-rw-rw-rw-   1 pa01     pa01            0 Apr  8 13:46 G1426.vpf
[etc...]
-rw-rw-rw-   1 pa01     pa01            0 Apr  8 13:46 G1673.vpf
-rw-rw-rw-   1 pa01     pa01            0 Apr  8 13:46 G1674.vpf

[MB I can't reproduce this bug, but here are some possibly useful comments:
VPF files are supposed to contain vpforms; the filenames Gnnnn
were created by (new-filename). There are two places in the code
where this can happen, both inside the vpforms.lisp file, and both 
during functions which print a vpform (display-vpd and %vpform).
It's unlikely that test-ms98 was to blame, since ms98 never prints the
vpform, even in verbose mode; could these files have come from somewhere
else? Since they're all zero length, this suggests that the actual
output was either aborted or went elsewhere... were you running SCRIPT, 
or using MATEVPW or EDWIN-VPFORM? Even these seem unlikely; I can't think 
of any likely way that you could produce 50 separate printed vpforms in 
*one* *minute*, which probably rules out display-vpd; the culprit must be 
the multi-page printing in %vpform. So this was somehow created by trying 
to print a 50-page vpform (!) to a file? I'm baffled...]
=======================================================
Need a version of copy-libobject which copies
everything except other-remarks
so that one can start fresh in experimenting with
the theorem

(Is this already there in some guise?)

If we have an object in two different directories,
can we use the delete command to delete it from just one of them?
[MB the delete command does exactly that. In fact, to delete it from 
n directories requires n calls to the delete command.]
===================================================

add the location of the web page to the etps manual if it'snot
there already


Omega in the User Manual index should also refer to
the -omega switch now on page 76



Make auto-suggest work for ms98-1 by having it set the flags needed for that

Does LATEX-EMULATION work on VPT?

Discuss the help message for MIN-QUANTIFIER-SCOPE

There's a new flag, TIMING-NAMED
This flag should be mentioned in the help messages for
DATEREC and DISPLAY-TIME

Somewhere in the documentation put this:
This allows the tps-test-output.doc files to be compare more easily using
grep and sort (previously, you could grep two files for "Mating Search" and
get a list of MS timings without any idea of which theorem they referred to;
this made it hard to compare two output files unless they had been run on the 
exact same setting of TEST-THEOREMS. Now if you grep for "MS ", the theorem
names will be printed as well...)

User Manual?

Does TPS load more library information when it starts up than would be
appropriate in an environment with lots of large libraries?

=============================================
Help for rules in etps requires system:anyuser rl access to the
rules files (and thus, to all the lisp files at present).
Fix this so only the rules files need be accessible?

=============================================
	The command PTREE-FILE outputs PTREE or PTREE* to a file. If you
choose width 200 (the default), then you can fit the output (by default,
in etree.txt) onto a page by typing (from DTPS):

enscript -r -fCourier-Bold6 -dberyl etree.txt

What about output which is too big to fit on one page?

jobs file:
make a version of PTREE-FILE which will make the top f the
tree diagram wde enough so that no detail is lost at the bottom

It always uses style generic, and you should print out in a fixed font
(like Courier Bold, in the example). Because of this, you can cut it 
into page-sized rectangles using the emacs cut/copy/paste-rectangle 
commands.

Is there an existing program to do the cutting and pasting?

How specify the font tothe printer?

==========================================
help face
FACE is a printing property.
The face of a logical symbol, identical for all devices.
This may be a list of symbols to be concatenated.
If left undefined in an abbreviation, TPS will attempt to find a 
symbol in the current style with the same name as the abbreviation.

Need examples


==================================================
Need to be able to incorporate tex output from
TPS into latex documents. Discuss this in the
documentation.

==================================================





===================================================
ETPS has a security feature which prevents 
loading someone else's files or files that have been edited.

When the security feature prevents loading a file, it should send a message
(See if it does.)
===============================================

tex-all-wffs should list theorems in a nicer order,
not quite alphanumeric
===============================================
Subject: Some notes on Allegro v5.0
Date: Mon, 16 Nov 1998 09:49:31 -0500
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>

[Note: since we built for ACL5 on Andrew, most of this is now done.
The only thing remaining is to change the non-lisp files on gtps once 
that switches over to ACL5. MB Fri Feb 19 16:13:05 1999]

I've installed Allegro v5.0 beta on my laptop at home, so now I know 
how to build TPS for that version. This email should probably be saved 
somewhere until we get ACL5 locally. The relevant notes are as follows 
(nothing has been changed in the files on afs):

* In tops20.lisp, find every instance of :allegro-v4.3 and 
  add :allegro-v5.0 to it.

* In boot0.lisp, find the :allegro-v4.3 definition of memq. For some
  reason, v5.0 doesn't seem to be happy with the macro version of this
  definition, so you'll have to make it into a function. You'll also 
  have to export this function (wrap the export command in a #+:allegro-v5.0,
  otherwise every other version will stop working!). This is ugly, and
  I'm looking for a cleaner solution.

* The behaviour of dumplisp has changed, again. (Someday I hope that this
  function will behave the same way for at least two consecutive versions
  of ACL. However...) Lisp now consists of two bits, a stub that loads 
  everything else, and the image that it loads. Dumplisp makes a new copy 
  of the image, but not of the stub -- in particular, the dumped file is 
  *not* executable. The file which we now call tps3.exe should be renamed
  tps3.dxl -- it won't work otherwise -- and can then be started with 
  lisp -I /home/theorem/tps/tps3.dxl

  This means we have to mess with run-tpsallegro, and with the instructions
  for building TPS that we put in the distribution, and possibly with other
  non-Lisp parts of TPS.

=============================================================

			SCRIBE TO TEX

 Transform the code which produces the
facilities guides so that it can give tex output. Transform the other manuals
into latex or tex.

=============================================================
Perhaps there should be a new version of handle-user-interrupt for
use from within prenex-iterate? We could do this using the flet command.
This should permit one to set a time bound and try each problem
of verifying that a prenex normal form is indeed equivalent to the given wff
up to that time limit.

=============================================================
The package structure is a mess; certain packages are required when
in fact they're completely unneccessary (for example, it's impossible
to remove the events package, even though we never use it). This 
should be fixed; then we can build a smaller TPS if we want one.
	Look at the maketps.log files and see if we can eliminate all the warnings.
=============================================================
=============================================================
See /afs/andrew.cmu.edu/mcs/math/TPS/admin/bugsdir/EXT2A.lib
===============================================
	PARALLEL VERSION OF MS98 SEARCH PROCEDURE
===============================================
	ORDER-COMPONENTS and SET-OF-SUPPORT

	Add one or more additional values for ORDER-COMPONENTS so that we can
get the effect of the set-of-support strategy by arranging the formula so that
the set-of-support is at the top, and is encountered first. Within this constraint, the
formula should be rearranged according to current options.
	Of course, there will need to be some way for the user to specify what the
set-of-support is.

=============================================================
Subject: Re: PRINT-HTML 
Date: Thu, 21 Jan 1999 16:57:13 -0500
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>

It occurs to me that it isn't entirely clear what the optional third
argument of PRINT-HTML is intended for. This, if set to T (it defaults to
NIL) will attempt to preserve any existing HTML in the input string,
while adding links to the documentation when possible. It's not very 
good at this, but it'll handle a very basic set of HTML commands; in
particular, it won't try to put links inside other links.

This makes it possible for some future research assistant to do the 
following:

1) Take the current manuals, except for the Facilites Guides, and 
translate them into LaTeX (the subset of Scribe which they currently 
use is sufficiently small that this could probably be done more or less 
by search-and-replace in Emacs, or perhaps by writing a very brief piece 
of Emacs-lisp code to do the bulk of the work and then hand-fixing any 
remaining problems).

2) Use a LaTeX-to-HTML converter (I think such things exist)
to produce HTML versions of the manuals. It would be nice if this could 
be made entirely automatic, so that updating the HTML versions would be easy.

3) Feed these HTML manuals through PRINT-HTML to get them linked to the 
online documentation and help messages. At this point, you'd need PRINT-HTML
to ignore the hyperlinks created in step 2; hence the optional argument.


=============================================================

	PROBLEM USING GRADER ON DTPS April 30

Fix this after all grades have been submitted. In the meanwhile, the old version
of the computation of MEDIAN is being used.

Note: it might be most useful if all non-numerical scores were ignored when computing
mean and median. Some help message such as that for STATISTICS should mention this.
The median of an even number of scores should be the average of the two which are
closest to the middle. If all scores are non-numeric, their mean and median should be 0.

<Gr1>ins
Please enter the names of the exercises, e.g.,HW1 EXAM1 LETTER1: 
j
J 
Please enter 1 item specifying the type of each exercise: 
hw
--MAX-- : 5
ALEXANDER : *
BERNARD : 5
CHENEY : 5
ROKOP : *
Error: EXCL::+_2OP: `NIL' is not of the expected type `NUMBER'
  [condition type: TYPE-ERROR]
[1] USER(1):
=================================================================
		EDITOR

	Someday make Skolemization commands and Clause-form editor
commands available in ETPS
	Introduce an editor command APPLY which replaces the current
edwff D(AB) by [D(AB) E(B)] (and the user supplies E).
=======================================================
Fix Grader (and TPS generally)
so that if you give it a pathname without the final backslash, it will provide
appropriate help. [Library already does this.]
============================================================
		ALTER-GRADE
Fix the ALTER-GRADE command in GRADER so that it provides the
current grade as the default choice.
[MB: Note that this job and the job above are essentially the same: make 
grader use the TPS command prompt-read, rather than reading directly from 
standard input; then prompts can have appropriate defaults, responses will
be properly typed, and help will be available...]
==============================================================
	SUBSTYPE COMMAND
One should be able to substitute for type variables, provided that
they do not occur in the hypotheses.
Look at the editor command SUBSTYP.
See the discussion of the rules module; User's manual page 59
==============================================================
	Fix the ED and MATE VPT commands so they produce
multi-page vpforms in style tex in files.
Subject: TeX vpforms
Date: Thu, 16 Oct 1997 11:38:34 -0400
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>


I was thinking about the problem of cutting up vpforms into page-sized 
pieces in TeX. Unfortunately, TeX has no commands for splitting a box 
vertically (it has one to split it horizontally, but that's no help), and
PostScript also doesn't seem to be able to do it.

So if we're going to manage it, it will probably have to happen at the time 
when TPS is writing the TeX file, probably by breaking the jform up into 
smaller chunks and treating each of them as a kind of mini-jform. I'm not
going to try this right now, because it needs some thinking about.

In the meantime, I've added some more flag settings: VPD-BRIEF BT prints
the boxed labels (like VPD-BRIEF B) and prints a list of wffs underneath
the vpform. It also prints the current mating. This results in as narrow 
a jform as you can reasonably hope for.

Also, VPFORM-TEX-MAGNIFICATION has been changed: it used to take values 
like 0=10pt, 1=12pt, and so on. It still accepts those values, but now
it regards all values larger than 10 as being TeX magnifications (which
are based at 1000=10pt, 800=80%, 1200=120% and so on). This gives us the 
chance to shrink below 10pt text and so squeeze more on a page.
==============================================================
Eventually might want to combine rewrite rules with unification 
in theorem-proving search.
====================================================================
	HELPING NEW USERS PROVE THEOREMS AUTOMATICALLY

	Write a short section on setting flags and then using DIY
for section 2.1 of the User Manual.
	Check the defaults for the important flags controlling 
search and set them to what we think are good typical values.
Keep track of the old values in the TPSJOBS-DONE file.
	Be sure we still have modes that work for proving all our 
usual examples. Some of them may have depended on the old modes.
	See if the global or local tps3.ini files should be
adjusted.
=============================================================
	MAKING IT EASIER TO FIND EXAMPLES OF HOW VARIOUS SEARCH 
TECHNIQUES WORK

Translate ND proofs into cut-free ND proofs on which ND-ETREE will work

Program to look at an expansion proof (generated from an ND proof)
and figure out how to set most of the flags needed to find the proof
automatically.
note that AUTO-SUGGEST does some of this.
===============================================
AUTO-SUGGEST doesn't work on X5200; it suggests MAX-MATES 1 and you need MAX-MATES 2.
=======================================================
Put description of AUTO-SUGGEST into the user manual. Do a simple
example
=============================================================
	Improving AUTO-SUGGEST
If you give AUTO-SUGGEST an ETPS proof which used extensionality,
it should suggest which instances of extensionality axioms may be needed
to be added to the hypotheses of the theorem. Can it determine when 	
the existing ways of rewriting equalities will suffice?
=============================================================
		DEFINE-MODES 
A program to prompt users with questions and help them define modes.
It's easy to forget certain flags which might be relevant.
An option should be to use AUTO-SUGGEST as part of the process.

=============================================================
	UNIFICATION

	Do whatever is useful to enhance TPS as a tool for research
on higher-order unification as well as a theorem proving system which 
uses higher-order unification.

Consider implementing Zaionc's work on regular expressions.
Check dpairs for cases which will not terminate using the regular
expressions criteria?

Consider implementing Prehofer's work on decidable cases.
===================================================================
	MST93-2 MATINGSTREE SEARCH PROCEDURE 
		MTREE SEARCH PROCEDURE 
See
Chapter 3 of the User Manual
/afs/cs/user/andrews/mtree-plan.mss 
/afs/cs/user/andrews/mtree.hlp 
/afs/andrew.cmu.edu/mcs/math/TPS/admin/mtree.doc

Read the discussion in the User's Manual and see what still needs
to be done.

Introduce an INTERACTIVE mode (similar to that which we have for 
ETREE-NAT) for use with the automatic mtree procedures so that we
can examine in a leisurely fashion what these procedures do.

Older jobs below may or may not be obsolete:


Put documentation not yet in User Manual and ideas for heuristics in
/afs/andrew.cmu.edu/mcs/math/TPS/admin/mtree.doc

Hongwei's files are in
/afs/cs/user/hwxi/lisp/matingstree Suggestions are in
/afs/cs/user/hwxi/lisp/matingstree/mst-suggestion.txt


/afs/cs/user/hwxi/lisp/matingstree/remark.txt needs to be kept up-to-date
Call it matingstree.hlp

	See discussion of cgraphs and failures of matings
in /afs/cs/user/andrews/mtree-plan.mss

	DOCUMENTATION!
For Users and for Programmers.

	Add heuristics for making choices. Flags should govern which
heuristics are used. Define some modes such as breadth-first, perhaps
governed by master-flags which set the others involved in this search.
	Have an automatic mode which simply uses the defaults.

	Heuristics: 
	Prefer one-literal clauses (i.e., choose to satisfy
obligations in ways that do not create new obligations).
	Set-of-support for deciding where to start

When we consider how to satisfy an obligation, see if it is
already satisfied in the current mating. An obligation is essentially
a path with a distinguished literal. It is satisfied if two of
its literals are mated.

Discuss how subsumption is implemented and put it in
/afs/andrew.cmu.edu/mcs/math/TPS/admin/mst-93-2.doc
	NEEDED FUNCTIONS:
	Ways to create and display the set of obligations associated
with each node of the matingstree. Assume that we mate literals (or,
more generally, nodes in the etree) only in order to satisfy an
obligation of a node of the matingstree.
	Display the structure of the matingstree

	Display the possible ways of satisfying one obligation for one
node. Computing this can involve constructing and using a connection
graph; this should be constructed in a lazy way as parts of it are
needed. For interactive work, it would be nice to be able to be given
a list of alternatives, and just choose one by its number.

	This search procedure will probably involve a great deal of
redundancy. Eventually we should study how to deal with this.

Hx: we can even apply to connection graph the substitutions below 
the branch point in a unification tree to narrow down the searching
space. For example, if we have two substitutions sub1 and sub2, then
we can drop connections which are not compatible with either of them.

Can simple control functions imitate ms88 and ms90-3 in this context?

Do some examples and see if we can design some new search
procedures.
THM100

Simulate resolution, at least in fol
-----------

Search heuristics for choosing links, especially the first link:
"set of support"

	Make the procedure for adding links to matings more
flexible so that we can add links even if they do not satisfy
current obligations. Schubert's Steamroller (PUZ031-1)
an example where we might want to do this.
(MB: Need to work out what this does to the obligation tree. It may
involve introducing "obligations" that one isn't actually obliged to
fulfill (qv PUZ031-1, where caterpillars turn out to be irrelevant). 
Perhaps some sort of "weak connection" that just
adds the unification constraint temporarily and then adds the link 
proper later on???)

Does the mtree top-level provide enough help about values of
default-ms?

===================================================================
	MODEL-ELIMINATION OR RESOLUTION
It's not clear which clause-based technique for finding matings
after expanding the wff would be a most appropriate addition to TPS.
Note that Bibel's followers have settled upon model-elimination,
perhaps with good reason.

	MODEL-ELIMINATION
Discuss this with Sunil
See W. Bibel, S. Bruning, U. Egly, D. Korn, and T. Rath",
	Title= "Issues in Theorem Proving Based on the 
		Connection Method",
	Booktitle="Theorem Proving with Analytic Tableaux and Related
		Methods. 4th International Workshop, TABLEAUX '95,
		Schloss Rheinfels, St. Goar, Germany,May 7-10, 1995",
	Editor="Peter Baumgartner, Reiner Hahnle, Joachim Posegga",
	Series="Lecture Notes in Artificial Intelligence 918",
	Publisher="Springer",
	Year="1995",
	Pages="1-16")
and references cited therein. Letz' thesis


		RESOLUTION

	Interactive facilities for resolution, especially for ETPS.

	A resolution style matingsearch procedure, properly interfaced
with the rest of TPS.  Associated with each clause will be a partially
constructed unification tree or set of constraints.  Of course, we
will apply substitutions insofar as they do not branch. The procedure
may resemble that described in @cite[Huet73] (see
....tps/doc/lib/logic.bib) , except that Huet's splitting rules will
be replaced by the application of gensubs.  (A procedure similar to
Huet's for sorted higher-order logic is described in
@cite[Kohlhase94].) See Kohlhase web site.

	Explore various aspects of implementation of OTTER.  (Note
/afs/andrew.cmu.edu/mcs/math/TPS/others/otter.) See Web site.  Send email to McCune
requesting papers and the source code if necessary. Note
William McCune, "Experiments with Discrimination-Tree Indexing and
Path Indexing for Term Retrieval, JAR 9, no. 2 (1992), 147-167.

	There must be a mechinism for reconstructing the mating once a
refutation is obtained.  Also, we must deal with the relation between
a mating for clauses and a mating for the orginal wff.
	Check what Pfenning or others have already done. See
Pfenning84 (CADE-7), page 408.

	Once we have this, we can use it as a tool in the development
of the matingstree procedure. Can we simulate it well by mtree?
===================================================================
		PUTTING TPS ON WEB
Using unix nice
Disabling ability to do etps exercises, and things nnf-equivalent
to them.

Example:
    http://www.mcs.anl.gov/home/mccune/ar/sobb/
 is essentially an Otter/MACE demo.
=================================================================
	Consider how indexing techniques can be used to improve 
the implementation of various processes in TPS.
See papers in libra.ry
===================================================================
	Someday fix this properly.
Subject: LEAVE in Review top level.
Date: Thu, 26 Sep 1996 16:19:30 -0400
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>

The reason why LEAVE doesn't work in the review top level is that the
property MAINFNS is used for both review commands and grader commands
(as well as other things). Most top levels call this property by different
names (eg MATE-MAINFNS, LIB-MAINFNS,...); if you use the same name in
different top levels, whichever command is defined last will overwrite
the previous commands. In particular, the grader command LEAVE overwrites
the review command LEAVE in the plist for LEAVE.

The proper solution for this is to rename this property so that it's distinct
in all top levels, and then fix the command interpreters if necessary to
recognise this.

The hacked solution, since this is the only command affected, is to put
an extra condition into the review command interpreter; this is what I've done.
Changed: review.lisp
====================================================================

		RULEP
RULEP occasionally loses sponsored lines -- e.g.
1 (some hyp)
10 (some goal)
and 9 is an asserted axiom (not sponsored, usually)

then rulep to prove 10 from 9 and 8 (where 8 is some new line) will
lose line 1 as a sponsored line.
==========================================================================

If a theorem A contains (especially nested) definitions, we should check
whether certain defined subformulas are convertiable to others.
If so, replace the theorem A by the result B of identifying such parts,
and prove B. Derive A from B at the very end of the proof.

--------------------------------------------------------------------

 Equalities inside literals are not expanded since this would mess up REMOVE-LEIBNIZ. 
Remedy this.

---------------------------------------------------------

		EDITOR COMMANDS IN ETPS
	The Skolemizing editor commands SK1 SK3 are available in tps
but not in etps. Perhaps they should be available in etps too.
What other editor commands are not available in etps?
[MB : the answer to the last question is: all the vpform commands
CJFORM, DJFORM, NUM-HPATHS, NUM-VPATHS, PJ, PROP-CJFORM, VP, VPD,
VPF, VPT, plus the commands CLAUSE-FORM, NAME-PRIM, PRT-PRIM,
SAT, VALID (which is actually there, but not in the editor command list
for some reason), SK1, SK3, DB, EP and OP.
Which ones do you want moved?]
	Let's put all editor commands in ETPS, unless you can think
of some reason not to. The ETPS manual should not be cluttered up 
with all these commands, but a comment should be inserted
that additional commands are available, and information about them can
be obtained by using ? in the editor and help <command>.


===============================================================
		LAYERED PROOF DISPLAYS
(Suggested by Michael Kohlhase)

	One should be able to display an ND proof in layers.
At the top layer only the most interesting proof lines are displayed.
Justifications for these lines may be references to other levels of the
proof, where more details are given. An arbitrary number of levels
should be permitted. Need commands for manipulating these levels,
restructuring the proof, saving various presentations of it, displaying
and printing, etc.
	Eventually want some routines for automatic structuring of the
proof display.

   The code in pbrief.lisp (including commands PBRIEF, EXPLAIN,
BUILD-PROOF-HIERARCHY, and PRINT-PROOF-STRUCTURE) does some of
this.  - cebrown 8/16/99

=====================================================================
	This message should be incorporated into Chapter 7 of the User's
Manual, or one of the help messages:

Scribe output is highly dependent on the settings of TURNSTILE-INDENT and
TURNSTILE-INDENT-AUTO (as well as FILLINEFLAG, FLUSHLEFTFLAG, and PPWFFLAG). 
Printed output of wffs is designed so that a wff in a proof never extends 
further left than the turnstile preceding it. If TURNSTILE-INDENT-AUTO
is MIN, COMPRESS or VARY, and some lines have very long hypotheses, the
turnstile can end up moving a long way to the right, and this will mean 
that some wffs have to be crammed into only a few columns -- hence
the bizarre output.

If you have many hypotheses and long wffs, it's probably best to set 
TURNSTILE-INDENT to, say, 5 and TURNSTILE-INDENT-AUTO to FIX. This will force
the turnstile to always be in column 5, by inserting a newline if necessary.
(Also set the other three flags above to T, T, NIL.)
====================================================================


HX		FINAL JOBS

Put files for the save-etree job in [gtps]/home/theorem/project/unfinished

Put comments in TPSJOBS about min-quant-etree, which doesn't work 
for ms88

Put comments about the SAVEPROOF code into the file or programmer's
manual, so future programmers won't be unnecessarily confused by the code
related to s-expressions

Documentation about NAT-ETREE. Discussion of what must still be done to
make it work right. Rewrite nodes. Some of this, taken from your email
message, is already in the discussion of NAT-ETREE below.
=====================================================================
		CASES*
	We need a command like CASES, but it should divide the proof into
n cases if the line with disjuction has n disjuncts.
=====================================================================
	PRIMITIVE NATURAL DEDUCTION RULES

	Need to incorporate ECONJ* and ICONJ*, as well as UI* and
UGEN* and SUBSTITUTE*, into TPS in some appropriate way. 
We need to be able to print at least interactive proofs which are not so
tediously long. Of course, every time we add a command which creates
proof lines, we complicate NAT-ETREE. 
	We should have a command or tactic which eliminates certain
inferences from proofs in favor of those in a more basic set. We would
just apply this before calling NAT-ETREE. In particular, at present we 
need to eliminate SUBST=L and SUBST=R. We can eliminate ASSERT REFL=
by proving the particular wff A = A.

(I added the next paragraph to this job on 8/16/99.  - cebrown)

One idea is to have an extra property of proof lines which indicates
how the line was justified, or better yet, how the line could be justified
using primitive rules of inference.  Then nat-etree and auto-suggest
could first expand the proofs so that every line is justified by a primitive
rule of inference.  Also, this would allow us to check the correctness
of natural deduction proofs.  (Currently we cannot check the correctness
because some lines in a proof -- in particular, those constructed by
tactics -- may not be justified by a rule of inference.)  This would
also allow us to check legality of applications of ADD-HYPS in a
more uniform and modular way.

======================================================================
HX	Fix the bug caused by PRETTIFY.
Check constants as well as variables.

I CAN make this problem disappear, but I figured out that there
is a fundmendal problem here: In general, we only prettify expansion
nodes, and we don't touch any skolem nodes; unfortunately, a prettified
higher order term associated with an expansion node can indeed affect
a skolem node below the expansion node; bledsoe-feng-sv-i2 is such an
example; we are facing two choices (i) stop prettifying higher order
terms but this almost makes prettifying meaningless, or (ii) design a
more sophisticated prettifying procedure; the latter is quite a challenging
job from my point of view. (July 5, 1995)
======================================================================
HX	SAVEXTREE and RESTOREXTREE
	SAVEXTREE and RESTOREXTREE should be like SAVEPROOF
and RESTOREPROOF, but work on expansion trees (which may be
expansion proofs) in the MATE top level.
=============================================================
HX 
	NAT-ETREE
Fix up NAT-ETREE so that once we have an ND proof it's trivial
to find proper search bounds
Look at code to see which ND rules we can't handle. Eliminate these
from the proof. Have a command that transforms ND proofs into
cut-free proofs. (We can't prove the process will terminate,
but we can try using it.)
Also see how to start from the induced mating to find unification
bounds automatically

(i) "Fix up" does not work. To my understanging, the old code takes
little consideration on higher order case; many rules which could not
be handled were simply spared under the assumption that they can be
dealt with later; this is not quite realistic!

(ii) rewrite nodes are the biggest challenge here. A few cautions has
to be taken care first: EQUIV-IMPLICS  rewrite node uses implicitly the
equivalence between

    "A implies B and B implies A" and "A and B or not A and not B".

Here is my plan, which works fine in the first order case:

(1) Find HOW expansion nodes are duplicated. mating info can be thrown
away during the procedure and be recovered back by calling prop-msearch.

(2) try to modify the code used for merging expansion trees; this is also
the most difficult part; the data structure is "etree without mating info";
cuts can be handled with the help of merging functions; this idea is essentially
the same as what is in Frank's paper

(3) Complex rules such as EQUIVWFFS and EQUIVEQ may be broken into simpler
ones first. Again rewrite nodes play a very active role here. ???

-----------------
Subject: NAT-ETREE
Date: Mon, 14 Aug 95 13:33:26 -0400
From: HongWei_Xi@CTPS.TPS.CS.CMU.EDU

At this time, NAT-ETREE is most useful if you try to get
a mating corresponding to a given natural deduction proof.
Because of the problem with rewrite nodes, the generated
expansion proofs may not be able to be translated back into
natural deductions: the mainly problem is that inner nodes
can be mated with other nodes.

Rule Subst= can not be handled at this moment, causing a
significant inconvenience. The problem seems to be much
more difficult than what I thought: so called "smart-expansion"
really complicates the situation. We can, however, always translate
a natural deduction into another one with no occurences of Subst=.

Truth values also present some difficult, though I have fixed
part of it. PROP-MSEARCH now can deal with truth values, which
allows REFL= to be handled correctly.

I will be writing a documentation or paper on the implementation
shortly so that others can fix bugs in this part more easily. Also
some debugging facilitates have been built up to catch and fix bugs.
--------------------------------------------------------

Wed  Aug 16 1995:
There is still a problem with rewrite nodes. The expansion tree must be
modified. One can see the problem by tracing CLEANUP-REWRITE-NODE,
CLEANUP-EXPANSIONS, and CLEANUP-ALL-EXPANSIONS.
	Bug: translating THM126.PRF back and forth leaves planned lines.
Also try $proofs/natree/THM112A-1.PRF
======================================================================
A pre-cleanup function is needed to cleanup the expansion proofs generated
by NAT-ETREE before submitting it to merge procedure. This is aimed at
yielding a cut-free proof for thm15b when thm15b-cut-interactive is given.
======================================================================

HX	Translation of natural deduction proofs into expansion proofs
when cuts are present.
See material in /afs/cs/user/fp/papers/elf/cut-elim

Note: the tableau command in otl-prt.lisp may be useful in putting the ND
proof into a tree format.
===================================================================

HX			VPT
	VPT chops off whatever will not fit on one page. Fix this, so that
the entire jform can be displayed by pasting the pages together. Then 
correct the mhelp message for vp-tex.
	Also provide for similar multi-page displays of other things
which won't fit on the screen, such as TABLEAU,
displays of matingstrees, etc. Perhaps there should be a warning if these
will involve an enormous number of pages.
	Have a tex mode for window displays which will permit much more
flexible use of mathematical notations

========================================================
	Introduce set notation {x| ... }
===========================================================================
HX 
min-quant-etree code needs work on rewrite nodes for beta and eta

	This should take care of the following message from Matt:
The bug to do with thm143a is an old familiar one, and I've moved the
entry from the tpsjobs file into the bugs file alongside the old entry.
I had a crack at this one a few months ago; it's something to do with
remove-leibniz-nodes and the way that things can get rewritten to TRUTH,
but it has me baffled -- and I'm not alone, to judge by the comment in
the code for that function which says:
  ;; this will probably not work in some weird case
  ;; where min-quantifier-scoping was used or
  ;; something similar happened, but I am just going to assume that
  ;; the only rewrites we have are either
  ;; lambda-norms or equivwffs (definitions)
======================================================================
HX        MIN-QUANT-ETREE

	Make this also work for non pfd searches.
Then test it on THM115.

Discuss what really happens. We need to describe this in the
documentation 
	The help message for the flag does indeed convey the essential
idea of what is accomplished, but I think it would be useful to say a
little more on a conceptual level about how this is done in one of the
manuals. Essentially, you replace one expansion proof (or information
from which one can be constructed) by another; a little more
explanation here would be useful.

(May 22nd, 1995) see /afs/cs/user/hwxi/lisp/tps/mqe.txt(HX)
Fix this for various values of lambda-conv flag

	OLD TASK DESCRIPTION: 
(Prove metatheorem: no bounds need be increased.)

======================================================================
	Find more interesting theorems which TPS can prove, and save
successful modes for each of them. 
See /afs/andrew.cmu.edu/mcs/math/TPS/admin/provejobs
Look not only at theorems
in /afs/andrew.cmu.edu/mcs/math/TPS/tpslib/andrews, but also those in
/afs/andrew.cmu.edu/mcs/math/TPS/tpslib. (The files here are not in the current
library format.) 
Also see /afs/andrew.cmu.edu/mcs/math/TPS/tpslib/andrews/thmideas
====================================================================
		MATING NON-LITERALS
	Will etree-nat work if non-literals are mated? [No. MB]
Fix it so it will. Use THM136 as a natural example. See the nice
interactive proof in
/afs/andrew.cmu.edu/mcs/math/TPS/proofs/thm136-interactive.mss  
or thm136-interactive.prf
We need to be able to produce such proofs if we can find their
expansion proofs.
====================================================================
MILIND		REARRANGE ND-PROOF

	Rearrange completed natural deduction proofs to make them
as natural and elegant as one can simply by moving lines around.
	Use the TABLEAU command (in otl-prt.lisp) to see the structure of the proof.
The code for that should be useful in rearranging the proof.
Also, look at what Hongwei has done in developing tree forms of nd proofs.
	It may be useful to us tactics.

	When a term is introduced via UI, all the free variables
in it should already have been chosen if they ever are chosen in the
proof.
	As much as possible, lines should follow from the immediately
preceding line.

	Example of looking at the internal representation of a proof
in TPS:
<15>prooflist
KUHK :
            FORALL x(I) [EXISTS y(I) P(OII) x y IMPLIES FORALL y Q(OII) x y]
<16>tlist kuhk


==================================================================
MILIND		COMMENTS
	Introduce a facility for saving comments when we use
SAVEPROOF. Of course, we will need a command for reading these comments.
	Similarly, we need to be able to attach comments to library files,
and read them.
	Should there be a general ability to attach comments to all
tps objects, and a command for reading them? HELP should be that command.
In particular, we may want to attach comments to proofs and library files.
	Add a suitable note to the User Manual.
=========================================================================
It may be worth noticing that SYMSIMP also apparently justifies lines with
RULEP without checking the value of USE-RULEP first. See if this should
be changed.
====================================================================
			TPTP PROBLEM LIBRARY
	Write a program to convert problems in
/afs/andrew.cmu.edu/mcs/math/TPS/tpslib/tptp
to a format which TPS can read. Take advantage of the material
already in /afs/andrew.cmu.edu/mcs/math/TPS/tpslib/tptp/Scripts.
Note: when this is done, we should tell Sutcliffe about it.
(MB : This is none too easy; most of the formats it knows are for Prolog-
based theorem provers, and so just need minor format changes from the basic
TPTP format. We need to do more major things like inserting forall and 
exists at the right places, and systematically changing (..)'s into [..]'s.
If we ever have anyone who already knows Prolog, they should do this...)
--------------------------------------------------------------------
	Put all the theorems in Chapter 7 of tptt into library files.
Definitions too.


=================================================================
		UNIT PREFERENCE
	We need ways to imitate some of the advantages of
the unit preference stategy.
	Have a search heuristic for pfd procedures which, when duplicating
the quantifiers governing literals on a path, refuse to duplicate such
quantifiers for unit literals (literals not connected to other literals
in the jform by disjunctions) unless those literals already have mates
in the current mating.
===================================================================
	MTREE HEURISTICS
Heuristics for MTREE to prove Steamroller, THM136 (transitive closure)
=============================================================
		LEMMA

	The LEMMA command doesn't acutally let one decide
what the hypotheses for the lemma are to be, though the
argument list includes a proviso for this.
===============================================================
		FINDING MODES

We might be able to improve some modes that now work for the theorems
in tps94 by using TEST.  Perhaps there are some theorems in TPS94
which are not now included in TEST-THEOREMS, but the current modes for
them can surely be found in my library, and may be mentioned as
comments in tps94.mss.
=================================================================
	IMPROVE THE TEST TOP-LEVEL
=================================================================
	MENU INTERFACE FOR TPS

Use idea's underlying Hongwei's menu interface for TPS?
Also consider Hongwei's ideas for running TPS in EMACS.
Is there something about this in some manual? [MB Instructions for
running TPS from Emacs are in the User's Manual.]

=============================================================
	Small Grader bug
<Gr4>display
Please type the name of the student(s) [Type ALL if you want to look at
all the students] [Default: ALL]: -median-
A B C D E T1 T1L SCORE TOTAL% TOTAL LE TEST HW
Please select the items that you want to look at [Type ALL if you
want to look at all the scores][Default: ALL]:

NAME            A  B  C  D  E  T1 T1L SCORE TOTAL% TOTAL   LE TEST  HW
--MAX--        30 37 39 45 31 100  A+  1000    100   282 (A+)  100 182
-MEDIAN-       22 26 33 36 26  74   B   708     70   198  NIL   72 130
The items in column TEST should be the same as in column T1
====================================================================
		KEYS on DTPS
	Backspace now works fine when running tps on dtps,
but ^U is not right. Fix up the terminal-setting file.
=========================================================================

Maybe we need a CW command in MATE. Of course, we need to think about
how to organize MATE and ED so as to avoid this redundancy

===================================================================


		WARNINGS
HX Almost done. some warnings are totally benign, and can only be
suppressed instead of being fixed.

Once I tried to build up TPS3 at home, I was really annoyed by these
flooding benign warnings. We truly need to make them suppressed.(HX)

Gradually and carefully clean up the causes of the warnings
when tps is built. Look through the maketps.log files.
===============================================================
	Note that duplicating inner quantifiers for ms90-3
may have changed our timing results. Record all the times
so that we can update the paper tps94 as necessary.


========================================================
		DOCUMENTATION
Chapter 17- Proof Translations
Section 1 Data Structures
	now completely blank
	Among other things, rewrite nodes in the etree should be 
mentioned

	Augment the code which creates the facilities guides so that they
can appear in latex instead of scribe format.
================================================================
		DUP-ALLOWED for ms90-3
	When this flag is set to NIL, duplication should be
strictly prevented
	Add a note to the help message for NUM-OF-DUPS that it
does not quite accomplish this.
==================================================================
MB		TEST-TOP

See /afs/cs/user/mbishop/lib/documents/meta-top-ideas.doc

Need some way the user can specify the search order.
Fix TEST-INITIAL-TIME-LIMIT to default to INFINITY and to be local to
the search.

Old Discussion (edited down to just those things still un-implemented)
	Also need a good general way to keep a database of results on
various theorems with various flag settings. Need automated
enlightening ways to display this information.

Subject: Search limit information
        It occurs to me that we are working in the dark unnecessarily
in learning how to best set the limits controlled by various flags.
It would be nice to have the values of the corresponding counters
printed out from time to time, particularly when they cause something to
happen and when success is achieved (so we can see how close we were to
the limit). This would allow us to quickly tune the flags to get
optimal performance on our next run for the example in question.

==============================================================
	Is there some bug involving max-mates?

	Make the help message for MAX-MATES more accurate.
Perhaps also write some more extensive description of what happens
and put it into the User's Manual
Wait until disjunction heuristic bug is fixed.
=================================================================
	When we call DIY to fill in a gap in a partially completed
ND proof, there may be support lines with free variables which TPS
can generalize upon. However, it may be that we know that this need
not be done, and if the variables in these lines are treated as constants,
the search is much simpler. We should have a variant of DIY, or a flag,
which allows us to choose this option. Naturally, it should be mentioned in the
help messages.

=================================================================

	Have an option for SCRIBEPROOF and TEXPROOF which allows
us to just print the active lines of the proof, in case we
want to study them without clutter.
=============================================================
Is our code inefficient because it has to check certain flags
even in inner loops?
Should we use more macros on well tested code which is called
very often?
===============================================================

		vpforms for scribe
Possible plan:
@tabdivide(50)
@begin(Figure)
@begin[verbatim]
@\|@forall@;p@+{2}@;                                              @\|
@\| @\|         @\|        LEAF14        @\|          @\|@\|


-------------------------------------------------------------------
	EXAMPLES

Need more examples where the instantiation for a predicate
variable is interesting, but the search is not too hard
after the primsub has been made.

----------------------------------------------------------------
	Add to the User Manual information about relative sizes of
MAX-SEARCH-DEPTH and MAX-UTREE-DEPTH for proving theorems with
ms88 vs. ms90-3. Do we have documented cases where they must be
larger for ms90-3? THM48?
===================================================================
	Find a set of canonical forms for wffs of propositional calculus
using only conjunction and disjunction and having exactly n
variables. Wffs which are equivalent modulo rule P and substitutions
for variables should be represented just once.
===================================================================
When print-mating-counter causes a mating to be printed, it should also
tell us the number of this mating. Also make something like this work
for npfd procedures.
================================================================

Write some documentation for a tps manual or notes to put into
$afspba/fonts.hlp explaining how fonts are used in tps, how fonts are
compiled, etc.
---------------------------------------------------------------
	Change the flag lisp-implementation-type to lisp-implementation
so that it won't be confused with the lisp function, which does something
slightly different.
	See if this requires changes, for example in the default value
of recordflags.
======================================================================
Apply primsubs introducing T and F automatically (with permission
of a flag)  for variables which occur only positively or only negatively.
Should be able to prove EXISTS p p

=======================================================================
01 May 94 18:00:04 -0400
From: Aptenodytes forsteri <Matt_Bishop@K.GP.CS.CMU.EDU>
>>>It would be better still if there were some way to avoid
>>>generating equivalent primsubs

looks as though it would be a useful thing to do.
===============================================================
Date: Tuesday, 8 March 1994 16:33:17 EST
Subject: Smaller core image for tps3cmu

HX: I tried it on pmax and failed. Then I sent a message to Sean Halgren
and got no response.(April 8, 94)

	Sean Halgren sent this message about making smaller core
images for cmulisp, which would presumably yield smaller core images
for tps3cmu. Feel free to try it out sometime.  The new version of
cmulisp should be built in a new directory, and it would be safest to
make a new directory to test building tps3cmu from that lisp.  See
CREATING DIRECTORIES FOR TPS AND ETPS in $afspba/tps-build.hlp.

- - - - Begin forwarded message - - - -
Subject: smaller cores
Date: Tue, 08 Mar 94 16:22:33 EST
From: Sean_Hallgren@LISP-PMAX2.SLISP.CS.CMU.EDU

To get a smaller core, go to the directory where you want to dump it, and
then do '/afs/cs/project/clisp/src/18/tools/mk-lisp alpha :runtime'.  That
should dump a core without the compiler, clx, clm, pcl, or hemlock.  If
you want a core with selected things in it, instead of :runtime, put any
of :no-clm, :no-clx, :no-hemlock, :no-pcl, :no-compiler.  For example,
if you want a core with only the compiler (and the runtime, of course), do
'mk-lisp alpha :no-clm :no-clx :no-hemlock :no-pcl'.  Let me know if it
doesn't work.

Sean
- - - - End forwarded message - - - -
=========================================================================
MB	OPEN-SUBSW
	It would be nice to have a command OPEN-SUBSW which would be
just like OPEN-MATEVPW but which would display only the names of
the option sets and the substitutions, but not the vpforms and the
literals. If there's a limit to how many windows we can open,
there could instead be a flag to determine how much gets displayed
in the matevpw, but I think one might sometimes want both windows
in order to examine different aspects of the search conveniently.
==================================================================
When TPS abandons an option set, it should tell us why
==================================================================
Check whether one can use ETPS commands for
interactive proofs when
UNTYPED-LAMBDA-CALCULUS is set to T. Can one do Russell's paradox?
Add a clarifying comment to the help message.

Add the following (suitably expanded) to the documentation:
Basically, I used the following method to do
the job. First, encode an untyped lambda term
into a typed one, so it can pass type checking.
Whenever you want to print out the term, it
will be decoded into an untyped form before
being used by a printing function. I should
emphasize that it is quite safe to do so.
With untyped-lambda-calculus set to T, it seems that some type
checking is still going on; in particular, TPS doesn't like
"lambda x . ~ [x x]" :

<13>ed
EDWFF (GWFF):  [+]>"lambda x . x x"
<Ed14>ok


<15>ed "lambda x . ~ x x"
Types of x and x do not match.
Types of ~ and x x do not match.
Illegal argument detected.
Expression is not well formed.
Illegal argument value: lambda x . ~ x x.
EDWFF (GWFF):  [&x x x]>"lambda x . ~ . x x"
Types of x and x do not match.
Types of ~ and x x do not match.
Expression is not well formed.
EDWFF (GWFF):  [&x x x]>"lambda x . not [x x]"
Types of x and x do not match.
Types of ~ and x x do not match.
Expression is not well formed.


===============================================================
	When UNIFY-VERBOSE is MAX,
messages should also get issued when we reach TFNs.
=====================================================
tps94. file: improve 
Maybe we should discuss unification failure, backtracking, etc.,
in more detail. What was implemented was not always what was
originally planned, and pfd differs from npfd, so we need to 
check what we say for accuracy.
=============================================================

Find out about system to make sure multiple programmers
don't create conflicts by editing the same file.

man rcs (revision control system)
or scs or cvs
===============================================================
When new top levels are developed, the code for the
facilities guides has to be updated. See if the
Programmer's manual mentions this.
=====================================================
Possible rainy day (or week) project: reimplement variable-binding as De Bruijn
notation so that wffeq and wffeq-ab are equivalent.  Nadathur and
somebody recently announced a variation of De Bruijn's scheme that supposedly
makes beta-reduction more efficient (was on the theorem-provers list, I
think, or maybe the lprolog list).  But it looks pretty complicated to
implement (Nesmith is going to try it for KEIM) with a fair amount of overhead.
=========================================================================
		GAPS
	When tps proves x2115 using mode-x2129a, it spends a
lot of time moving lines around to construct the final proof.
It should introduce gaps by renumberalling when appropriate.
===============================================================

	Replace MAX-SEARCH-LIMIT SEARCH-TIME-LIMIT by measures which
are independent of the speed of the machine.  Just have a constant
depending on the machine which we multiply these limits by?

============================================================
HX 

Sometimes, a connection could be added more than once in a mating
while ms90-3 is searching. This is necessary because of the way
ms90-3 does searching. If a connection is added again, what is
supposed to do with MAX-MATES? Currently, what we did is not making
distinction at all. Therefore, ms90-3 cannot prove thm48 while
MAX-MATES is set to 1. It terminates in a few minutes. Hence, I
deduce that ms90-3 could prove thm48 in a few minutes if flag
MAX-MATES behaves like we thought.
===============================================================
HX 

In ms90-3 tps insists on running TRANS-BUG-EX2 in first-order mode, but 
should not. Rewrite the function that recognizes what is first-order
and try this on TRANS-BUG-EX2 and on thm135a.
===============================================================
HX	FIND INFORMATION ABOUT CMULISP 
Get manual for new cmulisp.
DEBUGGER: learn about it, and give us all a lesson

How do we get out of the debugger from a terminal?

===============================================================
See DOCJOBS
===============================================================
		MONITOR 
Functions which recognize 
a given set of primitive substitutions (as specified by NAME-PRIM,
for example) modulo changes of free and bound variables.
===============================================================
		PRINT-SEARCH-TIME flag
===============================================================
	Check the file /afs/cs/user/andrews/rigid-path.doc.
Some potentially useful ideas are mentioned there. Eventually useful
parts of that file should be integrated into the documentation
so the file can be eliminated.
===============================================================
HX		                             partially done
Now there is a flag LEAST-SEARCH-DEPTH recording the minmal bound
for MAX-SEARCH-DEPTH. After a successful search, you may check the
value of LEAST-SEARCH-DEPTH, and reset MAX-SEARCH-DEPTH.

                  UNIFICATION DEPTH RECORD
	Introduce a command which will enable us to find the
depth of the unification tree associated with a completed mating.
This is probably the value of unode-depth for at least one unification
procedure.
	If this proves useful, we might want to have daterec
record it along with the other information.

Should we reset max-serch-depth once the minimal depth is found?
----------------------------------------------------------------
	FINDING UNIFICATION INCOMPATIBILITIES
	When TPS tries an incorrect mating, we need to find
unification failures as quickly as possible. It may be that some
incompatibilities are not found promptly because we do not focus on
them.  
	The unification algorithm currently chooses a dpair to
process which will minimize the branching in the tree. Instead of
this, choose a dpair whose head variable occurs a maximimum
number of times in dpairs of that node.
	Another possibility would be the following:
	When a node of the unification tree is encountered in which
two or more disagreement pairs have the same head variable, choose
some such head variable, and give priority to processing the dpairs
containing that variable (and the descendants of those dpairs in the
unification tree.) To do this, sort the dpairs so that the dpairs
which should be treated first occur first, and let this ordering
be inherited by descendant nodes in the utree. Descendants of dpairs
are placed in their parent's place in the list. Always process
the first dpair in a node.
	A "Pseudo-dpair" could be put in the list of dpairs after
all those which have this priority. When it comes to the front of the
list, sort again.
	This could be implemented very quickly. It would eliminate
the processing time used by the current heuristic, but might permit
more branching of the utree.
	These heuristics should be implemented by introducing a flag
in the subject UNIFICATION called FMCV (Focus on Multiply Constrained
Variables) unless someone can think of a better name for the
flag. It should have several possible values.
CHOOSE-DPAIR

	A related job to consider eventually is to eliminate multiple
copies of dpairs from nodes of the unification tree. May need an
alpha-normal form for dpairs. This check could be made (in some efficient
way) when the dpairs are first being put into the node.
We should check how often such redundancies occur.
================================================================
		IMPROVING UNIFICATION
	See if  there are implementable ideas in:
Marek Zaionc, "The set of unifiers in typed lambda-calculus as regular
expression", in Rewriting Techniques and Applications, edited by
J-P Jouannaud, Springer-Verlag, Lecture Notes in Computer Science 202
(1985), 430-440.
Possible example: see $proofs/THM148-DEPTH-FIRST.prf
====================================================================


See why ms90-3 (and ms92-9) seems to require deeper unification depths
than ms88 on theorems where no duplication is needed or done.
Examples: THM15B, x5310
	Why does ms92-9 sail right by the correct mating
 for thm15b with MAX-UTREE-DEPTH 28 and MAX-SEARCH-DEPTH 28
although ms90-3 finds it with these depths set to 20? 
Sunil thinks there may be a bug here in the control structure.
	Check that there is not a bug in the way MIN-QUICK-DEPTH
(which was set to 10) was being used by ms90-3.
Try running THM15B with MIN-QUICK-DEPTH set high.
===========================================================================
HX  I created a function used in matingstree project, which basically
does the same thing as what you mentioned below. If you need such a
command, Please name it. Then I will add it to mate toplevel..

 		DP* and CJFORM
        I'm wondering whether there is any good reason for the mate
commands DP, DP*, DPTREE, and CJFORM to be available for interactive
use. The problem is that users have to remember to use them. Is there
any reason these should not be applied automatically in all relevant
situations? [MB: The DP command and its variants can be useful for 
debugging; I used them extensively while implementing dual instantiation.
I haven't found a use for CJFORM yet, though.]
	Sunil says he can't remember any good reason, and the way to find out
is to go ahead and make this change. Apply the deepening commands whenever
a command is applied that changes the etree.
        DP= may be something that should be kept as an interactive
command.
------------------------------------------------------------------
			PROJECTIONS
	It may be that TPS cannot prove THM120H automatically at 
present because when it generates a primsub of the form
[lambda u(OI) lambda v(OI) forall x(X). P1 u v x OR P2 u v x]
it should also generate variants of this in which projections
are substituted for P1 and P2. 
Try this interactively in MATE to see if this is the case. If so,
a flag should be added which would enable us to tell TPS to include
all those additional primsubs in its search process.
===============================================================
HX			HELP MESSAGES
/afs/cs/user/hwxi/hxlisp/unification/help.txt

        We need to make the help messages for the unification limit
flags much more informative.  Look at where these occur in the code
and draft some improved messages. If necessary, devise some
experiments, or (temporarily) insert extra print commands in the
files, to resolve questions.  Check with Sunil for accuracy.

MIN-QUICK-DEPTH: 
used in constructing the cgraph for ms88;
used to decide whether a link is compatible with the current mating?
See unif-tree.lisp
	May 27 Sunil said:
Tps generates the utree to at least depth min-quick-depth
when trying to decide whether a pair of literals is a potential connection.
	Question: does tps use this flag when deciding whether such a pair
is compatible with the current mating?
---------------------------------------------------------------------
		CHECK-SEARCH (QUERY-USER)

	A perhaps separate and more complicated job is to also have a
value QUERY-LINKS which causes tps to query the user every time it is
ready to add a link to the mating; if the user rejects that link, tps
proceeds as usual to look for another one, but if the user does not
reject the link, tps does all it would normally do to try to add that
link to the mating. This would allow us to quickly guide tps to the
correct mating (assuming we know it) and check that we have
appropriate values for unification flags; this may be more convenient
than doing the mating interactively in some cases, and allow  us to
deal with ms90-3 as well as ms88. (We should check whether this
really will behave exactly like the complete search as far as
unification depths are concerned.)
	We might want a separate flag for this, but having one
QUERY-USER flag with many possible values makes it easier for users
to remember and find out how to check on various aspects of the
search.  Thus, additional values would be QUERY-JFORMS&LINKS and
QUERY-JFORMS2&LINKS.

-------------------------------------------------------------------------
		ARGUMENT COMPLETION
	One can have tps complete the statements of commands by using
the escape key. It would be convenient if this also could be used to
complete arguments in situations where this makes sense. In particular,
when GRADER asks for student names, it would be very convenient to have
automatic completion. (Some student names are long and complicated.)
-------------------------------------------------------------------------
			MEMORY
	Find out more about managing memory and garbage collection
How can we see how much is available, and how the gc flagsd should be set?
When I run big jobs on tps3cmu, it garbage-collects all the time
On btps (and perhaps the other workstations), usr0 is almost full but
usr1 is empty; what should be done about this?
Read manuals
Ask Lisp maintainers and facilities people at cmu
profile may be relevant
	Example of problem while trying to prove X5310-SUB2 using
allegro4.1 is in $afspba/space.hlp
=============================================================================
	IMPROVE OUTPUT
	Have lots of printing commands in the code, and lots of
flags to control them, so that we can see exactly what we want to see.
Can we interrupt tps, change these flags, and have it continue?
----------------------------------------------------------------
Check which matingsearch procedures various flags actually apply to, and
put them in the right subjects.
--------------------------------------------------------------------

Help generate interesting examples of theorems we 
can prove semi-interactively.
Make work files.
We want to check that we don't run into bugs when we call diy after
having constructed part of the proof interactively. Use GO2 for the
trivial interactive parts.
--------------------------------------------------------------------
When we run ms88, tps will run in first-order mode on a first-order
problem, but this may not be the case with ms90-3, and it should be.
--------------------------------------------------------------------
	COMPARING IMPLEMENTATIONS
I tried proving
THM112A with each of the versions of tps we have on the decstations
using  MODE-THM112A-TRY4, with these results:
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Monday, June 21, 1993 at 13:33:21.
Complete automatic proof using MODE-THM112A-TRY4 and Allegro3.1
-----------------------------------------------------------------------------
DIY                  |      400 |           306.28 |       7.90 |     298.39
                      (6.7 mins)         (5.1 mins)                (5.0 mins)
-----------------------------------------------------------------------------
Mating Search        |      342 |           273.43 |       7.58 |     265.85
                      (5.7 mins)         (4.6 mins)                (4.4 mins)
(LISP-IMPLEMENTATION-TYPE . \"Allegro CL\")
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


Monday, June 21, 1993 at 14:09:49.
Complete automatic proof using MODE-THM112A-TRY4 and CMU lisp.
-----------------------------------------------------------------------------
DIY                  |      552 |           326.83 |      18.58 |     308.25
                      (9.2 mins)         (5.4 mins)                (5.1 mins)
-----------------------------------------------------------------------------
Mating Search        |      486 |           301.30 |      18.58 |     282.72
                      (8.1 mins)         (5.0 mins)                (4.7 mins)
(LISP-IMPLEMENTATION-TYPE . \"CMU Common Lisp\")
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


Monday, June 21, 1993
Using MODE-THM112A-TRY4 and Allegro4.1, tps ran right by the correct
 primitive substitution, and never found the proof, even with
SEARCH-TIME-LIMIT increased from 30 to 60.
MB has a successful proof of THM112A with SEARCH-TIME-LIMIT set to 700.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

        Unfortunately, Allegro 3.1 has that bug in the timing mechanism
which (I think) prevents us from getting accurate timing records from it
when the run lasts 24 hours or more.
        It would be nice to know why the Allegro4.1 version is so much
worse on this problem (and whether it behaves in a similar way on most
problems).
        It occurs to me that ACL4.1 may take much longer to prove
THM112A because it takes much longer doing garbage collecting and
scavenging. If we could be sure we were recording the time used on
such things accurately for several versions of Lisp, it ought to be
easy to check this out.
         Perhaps we just need to change the way some of
those variables mentioned in the ACL4.1 manual are set.
===============================================================================
			MORE INFORMATION
	(This is a vague job for the present)
We need better ways of getting information about what is going on in TPS.
Ideally, we could ask questions or change verbosity flags while TPS is
running.
At times we need to know more about:
The size of the master etree
The size of unification trees
------------------------------------------------------------
	Track down some bugs. See the bugs directory
/afs/cs/user/andrews/bugs and the file
/afs/cs/user/andrews/bugs/bugs.
--------------------------------------------------------------------
		FALSEHOOD in MS90-3	(See BUGS file)
----------------------------------------------------------
		ms90-3 problem with THM50	(See BUGS file)
--------------------------------------------------------------------
		EDITOR COMMANDS

		ADJACE
	Incorporate Michel's commands editor commands
adjace, adjace1, and left-top-move into the editor. They are in
/afs/cs/user/andrews/ms2d/adjace. The mate commands should
probably be reworked completely someday
	Need a command EXPAND1= which just expands the topmost =
(This is low priority, since one can move to that = and expand it.)
----------------------------------------------------------------
		SUBFORMSUBS	
	(Subformula substitutions)

	It is often a good idea to look at the theorem being proved
for ideas about how to instantiate higher-order quantifiers. (For,
examples, see X5310 and Bledsoe's papers on set variables.)  In order to
experiment with this interactively, let's have editor commands
NAME-SUBFORM and PRT-SUBFORM which are like NAME-PRIM and PRT-PRIM
except that the substitution terms they generate for each variable p
have bodies of type o (following the lambda's) obtained as follows:
choose a subformula B of type o of the formula to be proved which does
not contain the variable p; the depth of nesting of quantifiers and
connectives should not exceed the argument SUBFORMDEPTH (just to keep the
number of generated substitutions reasonable). We may wish to also
make this depth at least two to avoid mimicking primitive
substitutions.  Replace each free occurrence of a variable in B by a
term hw1...wn, where h is a new variable of appropriate type, and
w1...wn are the variables in the lambda-binder. (Compare with
PRT-PRIM; try this on x5310). 

===============================================================
	Plans for new search procedure

Learn more about the basic data-structures
and representation issues involved in
matings and expansion trees. Document what you learn.
Include a list of the most relevant files.

-----------------------------------------------------------------
		SUPER ADVICE
	Facilities so ETPS will run matingsearch 

	Check whether we can call diy with any partially completed proof,
and have it prove one planned line. Look in the bugs file for problems,
and see how hard they are to fix.
	Then have an etps command which allows tps to figure out one
a suggestion for one step of the proof.
NOTE: the big job is to interface this properly with the grader program.
We could do something simple, like just write a record to a file saying
how much advice was used.

------------------------------------------------------------	
		GO2 for ETPS
	Fix things so one can use GO2 for certain ETPS exercises:
Put it and all necessary tactics into the USER package, or
into a new LISP package intermediate between USER and AUTO?
(Note that this question of packages also will arise if we make
a sophisticated HELP mechanism available in ETPS.)
Set things up so that the teacher can declare whether certain rules
(such as RULEP and GO2 and ADVICE) may be used; make this more
general than it is at present?
----------------------------------------------------------------
	MORE DISJUNCTION TACTICS

	Convert a planned line [A OR B] into [~A IMPLIES B].
	Convert a planned line [A OR B] into [~B IMPLIES A].
	Convert a derived line [A IMPLIES B] into [~A OR B].
-------------------------------------------------------------------
		QUOTED FORMS
        We'll have to consider whether we should actively look for and
fix '(...) forms; perhaps we can partially automate this.

	if you look at the old-tacticals.lisp and
old-tacticals-macros.lisp (I've shipped in replacements), you'll see
that at many places the form '(lambda (x) x) occurs.  According to the
CL standard, a compiler can assume that anything that is quoted can be
treated as a constant.  A smart compiler can therefore compile several
occurrences of such a quoted form into references that are EQ.  Then
destructively modifying any one of these occurrences modifies them
all.  This can play havoc with your code; instead of getting a
brand-new list every time, you get the same old one.  Note that in
interpreted code, you probably *will* get a new list every time.  Nor
is a compiler *required* to treat such quoted forms as constants, so
in some Lisps (even future Lisps) they may all be different.  Note
that actually in CMU CL, you will get a compiler warning message if
you use a form like (push x '(1 2 3)), because there is no SETF
accessor for quoted forms (they are constant values, so you aren't
supposed to SETF them).

Here's an example:

;;; foo.lisp
(in-package :user)

(defun foo () (princ '(1 2 3)))

(defun bar (x)
  (let ((y '(1 2 3)))
   (princ (nconc y x))))

If you put these functions in a file and compile it and load it in CMU CL:

* (load "/usr/nesmith/foo")

; Loading "/usr0/nesmith/foo.pmaxf".
T
* (foo)
(1 2 3)
(1 2 3)
* (bar (list 4 5 6))
(1 2 3 4 5 6)
(1 2 3 4 5 6)
* (foo)
(1 2 3 4 5 6)
(1 2 3 4 5 6)

As you can see, FOO's value is quite a bit different from what you would
expect from looking at the source code.

I have therefore changed tacticals.lisp and tacticals-macros.lisp to be more
(probably overly) careful about this, though I don't know exactly how
the problem was coming up.

Effectively, the change is from '(lambda (x) x)               to
                                 (list 'lambda (list 'x) 'x)

I hope that will fix the problem.  Unfortunately, I think this signals a
coming flurry of such cases, because TPS was not written with such
considerations in mind.  There are probably a lot of instances of the form
'(...) around, some of which are okay (because they are never changed) and
others which could be problematic.


Date: Mon, 08 Mar 93 18:27:01 +0100
Message-Id: <1562.731611621@js-sfbslc10.cs.uni-sb.de>
From: Dan Nesmith <nesmith@cs.uni-sb.de>
>       We'll have to consider whether we should actively look for and
>fix '(...) forms; perhaps we can partially automate this.

You can certainly use grep to search for all occurrences of the string "'(".
I count this way 345 of them (weeding out the occurrences of "#'(").
But that will probably result in more than is required.  Actually it would
probably hurt nothing to replace all of them by equivalent (list ...) forms,
but might be a lot of trouble.

It is really only necessary to replace them if the list that is so constructed
could somehow be modified.  If it only used as in (member foo '(a b c)) then
there's no real danger.
------------------------------------------------------------------------

		See thm48-92-aug-10.bug.
Does REM-CONN simply not fix the unification tree properly?
===============================================================
		VALIDATIONS

	Nesmith remarked 1993 March that the validation stuff is
probably used nowhere.  Think about what should be the general policy
about validations for the long run. Do we anticipate ever using them,
or should we find a graceful way to get rid of them?

Date: Mon, 08 Mar 93 18:27:01 +0100
From: Dan Nesmith <nesmith@cs.uni-sb.de>
The only way I can think that we would use them would be in a situation
where there was otherwise no remaining trace of the process which led
to success.  Since we use tactics only in the translation of
expansion trees to natural deductions or in natural deductions themselves,
where the remaining ND proof is itself a validation of the process, I don't
see the need for them.

It would be easy to get rid of them, I think; probably just editing
tacticals and tacticals-macros would do it.
===============================================================
		KEYWORDS

Date: Wed, 03 Jun 1998 19:44:59 -0400

Library objects now have a new slot, :keywords, which contains a list
of the keywords associated to that object. At the minute, only gwffs 
and abbreviations can have keywords, but all library objects get the :keywords
slot, to leave room for future expansion.

Each library directory contains a keywords.rec file which lists all of the 
acceptable keywords and gives a brief description of them. This file will 
be automatically created if it isn't present. A keyword is deemed acceptable
if it occurs in any keywords.rec file which is visible in either 
default-lib-dir or backup-lib-dir (so that I can use your keywords without 
having to add them to my file).

Some keywords can be checked automatically (essentially, all of those listed
as "filters" in the help message for SHOW-ALL-WFFS); other keywords are 
user-defined. Automatically-checkable keywords will be generated by TPS, and
will override anything the user types (so that if I say THM15B should have 
keywords INTERESTING and FIRST-ORDER, TPS will allow me INTERESTING because 
it can't check that, but will delete FIRST-ORDER because it's wrong; it will
also add any other keywords that it can check).

There is a new flag, LIB-KEYWORD-FILE, which defaults to keywords.rec, and
several new commands:
SHOW-KEYWORDS lists all of the keywords currently known.
ADD-KEYWORD allows you to define a new keyword, which will be saved.
CHANGE-KEYWORDS allows you to change the keywords of a library object.
UPDATE-KEYWORDS scans your library and adds all the automatic keywords it can.

This latter is very slow, and will crash (without damaging anything) if it
reaches a gwff it can't parse. This is a good way to check your library 
for bugs! Once the keyword slots are defined, SHOW-ALL-WFFS will use those 
as the filters, instead of parsing and checking every wff individually. This
should make it quite a bit faster.

There is no DELETE-KEYWORD command, because some keywords aren't deletable,
and also because we don't want to have keywords that occur in the files
but not in keywords.rec.

===============================================================
	LIBRARY IMPROVEMENTS
	We need to add facilities for indexing things by subject
(etc), adding comments to library files which can be read from TPS,
etc.
	Someday it would be nice to have a systematic index built into the library.
	A facility which enables users to define and save rules of inference
in the library.
===============================================================
	MORE LIBRARY IMPROVEMENT IDEAS

cebrown 8/3/99
The following are ideas as to how the library could be modified,
along with comments about what the library does now.

We could consider the library as consisting of library objects,
library files, and library directories.  A library directory is
one with a libindex.rec file.  What determines a library file? 
(.lib suffix? ie, DEFAULT-LIBFILE-TYPE flag suffix)
We could have delete/create/rename/move/copy commands for
objects, files, and directories.

IDEA: May want to have a new flag (or new flags) which, if set,
indicates that the user should never *have* to type
in a library file name or library directory name, but
can always obtain it by menu choice.  This may require
a new argtyp existinglibdir or existinglibfile.
Given such a framework, a command create-lib-file makes sense.

Where does the code assume library files are in
/afs/andrew.cmu.edu/mcs/math/TPS/tpslib?  It shouldn't, right?

KEYWORDS:  Currently if the user specifies a keyword which is not in keywords.rec,
it is not added to the list but the user is not warned.  Also, should every
subdirectory have the same keywords?  Why?  It's not clear when keywords are
changed, appended, etc.  

BESTMODES:  FIND-DUP-MODES checks all DEFAULT- and BACKUP-LIB-DIRS.  Should
   it give the option of just DEFAULT-LIB-DIR?

   Currently bestmodes.rec files don't seem to be automatically created for subdirectories.
   But Matt's subdirectories do have (empty) bestmodes.rec files.  It's simply unclear
   how bestmodes should or does interact with subdirectories.

   Explicit mentions of bestmodes.rec should be references to LIB-BESTMODE-FILE

 MODIFY-BESTMODE doesn't appear to create a modified copy of a read only best mode
  in my own directory (I tried this with THM44) as the help message suggests.

 CHANGE-KEYWORDS should warn the user when an illegal keyword is used.
  Instead, now, TPS pretends to have added the "keyword"  (example, add the
  alleged keyword "foo2" to an object)

 search nil ("test2" "foo") No finds test2 gwff in cebrown
   but search nil ("test2" "foo") Yes doesn't.

 show-all-wffs, scribe-all-wffs, tex-all-wffs use the first
     gwff of a given name instead of showing all.

 show-wffs-in-file takes the first file found instead of prompting
     for a choice.

 fetch should get first found if show-all-libobjects is NIL.  But
    it fails.  I made a change in retrieve-libobject-real, but this is not enough.
    It still fails.

  MOVE-LIBFILE moves the file even when there is a conflict of object
    names.  We should never have two objects of the same name and type in the
    same library directory.

-------------------------------------------------------------------------
	MATE top-level

Conversion to ms90-3 representation. Unification top-level.
Making interactive facilities more robust
New mate top-level for new search procedures?
===============================================================
	DOCUMENTATION 

See DOCJOBS
-------------------------------------------------------------
		DOCUMENTATION
		MACROS
        As you can see from the Facilities Guide (for example,
page 81), some tps files are called macro-files. Perhaps this is
a good time to look into how these are handled, and make sure
that macros are handled correctly as we write new code.
        It would be good to have a little documentation about this
written for the Programmer's Guide. We can discuss this with Sunil
before or after drafting it.
-------------------------------------------------------------------------

		PROFILING TPS
	Investigate where tps uses its search time, and create
facilities for easily investigating this and keeping track of the 
results. See:
/afs/cs/user/andrews/lisp-profile.hlp
/afs/andrew.cmu.edu/mcs/math/TPS/lisp/profile.lisp
/afs/andrew.cmu.edu/mcs/math/TPS/lisp/mat-pro.lisp
-----------------------------------------------------------------------
Clean up backup and ms2d files in tpslisp. Don't want them there when 
the files are distributed.
>>all backup files as of the end of may 1993 were moved to old-source
>>in a subdirectory called twiddle-files-may93 (mostly to prevent etags
>>from indexing them, which was getting annoying...)  (MB)
Compare these with the source files via diff. Also see what
backups for these files are in old-source directory.
Move appropriate backup files to that directory, with 
suitable extension of the name.
	This job may be boring, so just do it a litle at a time.

----------------------------------------------------------------------
		SUBJECTS for NUM-OF-DUPS

Update the mhelp for NUM-OF-DUPS to indicate which search procedures
actually use it. MS-92 should be one of these.
----------------------------------------------------------------------
		ANALYZE MS92-9
	It appears that MS92-9 is a bit slower that MS88. 
(See bottom of the file success-summary.) Is this just
because it does more work (which is actually necessary for MS90-3 but
should not be for MS92-9) to construct the expansion tree at the end?
--------------------------------------------------------------------
HX		ORDER-COMPONENTS

ORDER-COMPONENTS does work in ms88.

	Change the flag ORDER-COMPONENTS so that it takes values of
type SYMBOL, and introduce a variety of options. One should be the
opposite of the current T option. 
	One should put the set-of-support literals where they will get
considered first.  (Need a way to specify them.) One option is to let
them be the consequent of the last implication in the theorem. A
simple way to do this is to rearrange the jform before starting search
so that the left-to-right order is reversed.  Thus [A and B and C
implies D] will be arranged as [~D and C and B and A], so the mating
procedure will start looking for mates for literals in D. This
partially implements ideas in the set-of-support strategy.  In another
version, have the user specify a set of literals and move these as
close to the beginning of the wff as possible before starting
matingsearch.
	Another option would be to reorganize the formula so that
literals considered early have the fewest potential mates.
Need to know where the connection graph is. attribute of the jform.

	Implement a heuristic which reorders the jform so that paths
are explored first which contain few flexible atoms (since these can
mate with anything); alternatively, minimize the number of potential mates
on paths. 
	Rearrange jform so that parts of the wff of the form [A or ... or B]
which have no variables in common come first. This essentially splits
the matingsearch problem into independent parts. (Of course, we must
be sure that there are no indirect links between these variables via
other variables which are linked by occuring in common literals. Clarify
this notion first.

--------------------------------------------------------------------
HX	Develop a new and better top-level for playing with matings
interactively. Probably this should be entered from the mate top-level
to get the jform from the etree. Use the ms90-3 representation of
variables instead of the ms88 representation. Do it in an object-oriented
way. Use something like var-root for car, and something like var-index
for cdr. (Check for name conflicts here.)
-------------------------------------------------------------------
	Fix up help messages for vpform-labels, etc.

-------------------------------------------------------------------
		MORE TEX JOBS


FP	Find the files which were migrated from the C (TOPS-20) and
were used by Pfenning for his thesis to print TPS proofs in tree style
using TEX.

-------------------------------------------------------------------
---------------------------------------------------------------------


	Documentation about MATE top-level

	We would like to be able to use many editor commands in the MATE
top-level as ways of changing wffs interactively while building up
matings interactively (or semi-interactively). In how general a way
can we do this?

	Check what the various vp* mate commands actually do, and make
the help messages more informative. If some command does not already
do this, write a function which will allow us to see the jform in the
mate top level when vp doesn't do this. At present we do: 
ed "a"
<Ed42>(setq edwff (auto::eproof-jform current-eproof)) 
<Ed43>vp
------------------------------------------------------------------
	Make a file of TPS documentation notes as you find out useful 
things.
-----------------------------------------------------------------------
		INTERACTIVE MATINGSEARCH
	Improve facilities for doing matings interactively and semi-
interactively.
	Get the mate command APPLY-SUBSTS to work.
	If one builds up a mating interactively using ADD-CONN,
goes to an expansion node and does dup-var, go to the top and does dp*
and cjform, and then tries to add-conn with a leaf that was just created,
one gets the message "Adding this connection causes incompatibility",
but if one does the duplication first and then builds up all the 
connections, things work OK. (Check this.)
	Eventually fix things so we can do some mating interactively,
then call GO and let TPS finish the job. Perhaps need an option which
prevents it from undoing anything we did in its backtracking process.
	The mate command DUP-VAR appears not to do anything, even though
it actually does. Perhaps it should give some kind of message.
----------------------------------------------------------------------
	Simulate the set-of-support heuristic.
--------------------------------------------------------------------
		UNIFICATION
	Change the unification top-level to use UN90 (or to permit
one to use either unification package). We'd like to settle on
one basic representation to maintain.
	Change UN90 so that it saves the whole tree? This permits
a more sophisticated subsumption test, and allows one to examine the
whole tree in the interactive unification top-level.
-----------------------------------------------------------------------
			FAILURE-RECORD
"Failure Record". See $afspba/failure-record.doc
	Study the effectiveness and overhead of the failure record.
	Should we encode methods of minimizing inconsistent matings?
How would we use these?
--------------------------------------------------------------------

MS	Matingsearch or Editor command
ADJACE (or CLOSER) such that if W, M and N are wffs and M and
N both occur in W, then CLOSER W M N is a wff equivalent to W in which
N has been moved as close to M as possible.
See SUB in the editor for an example of how the interface should work
for an editor command wioth several arguments.
W should be the edwff.
Note: (setq (eproof-jform current-eproof) (ms2d-fn (eproof-jform current-eproof)))
See /afs/cs/user/andrews/jforms.hlp

--------------------------------------------------------------------
	Rigid e-unification using Wayne Snyder's algorithm when we get it.
Read Snyder's notes and Cade-11 paper.
--------------------------------------------------------------------
PBA	Put contents of EDOP-PERMUTE.LISP into the appropriate tps files
PBA	Install and test:
MS	Fix runcount so that it keeps counting seconds over a run
which lasts more than one day. Ran for three days 1991 May 28 and it
recorded only 14399 seconds.  NOTE: This is due to a bug in Allegro
clisp. It should be fixed in the version to be released June 1991.

	The information in the programmer's manual about edops is in
/afs/andrew.cmu.edu/mcs/math/TPS/doc/prog/wffops.mss. If you have some improvements
to suggest, copy the file to your directory and edit them in. Keep track of 
what you do so we can discuss it.

MS	Postpone further work on this:
MS	Devise a function which will check how many substitutions
match generates for each dpair. Integrate this into a new version of
the function ho-unif-match in the file ms90-3-unif-tree. (Probably the
function ho-match-top (which is called by ho-unif-match) needs to be
replaced.)  At present, the substitutions which MATCH generates for
each dpair are generated and counted, and then MATCH is actually
applied to the variable for which this number is smallest. It is not
necessary to actually generate all these substitutions, and is
wasteful, since lots of w-vars and h-vars are generated and then have
to be garbage-collected.  Just devise a good way to calculate how many
substitutions would be generated.
Look at the function projections-ho in the file ms90-3-unif-match; it
does the work, and also creates the projections.
	Go through the dpairs in the node one by one, and keep track
of the best one encountered so far; when finished examining them,
actually call the function which generates the projections and imitation.
(see projections-ho).
	Make comments to be attached to the functions and their arguments.
	Check the bug which arose when I tested this on THM47. Probably
used MODE-THM47-E.

PBA	 Look at gar and gdr (which are tps functions), and see how
they and related issues should be (or are) documented in the
Programmer's manual.

	Check documentation of how to create an edop.
-----------------------------------------------------------------------
	Optimize both UN90 and UN88 to minimize branching as much as 
possible. Some ideas:
1. The head of a rigid term could be a variable, which excludes an imitation-
   Only projections onto arguments which can be used to introduce that
   variable will do any good. Example: to unify
   <lambda x1 x2.f E1 E2, lambda x1 x2. x2 ...>,
   it will only be useful to substitute for f a projection onto the
   ith argument if x2 is free in Ei.
2. The arguments of the flexterm might themselves have rigid heads,
 which in case they do not agree with the head of the rigidterm
 will generate substitutions which will be rejected later by simplify.
 To detect this in advance one needs to look at the heads of the
 arguments of the flexterm.

	eta-reduced form:
Editor command (if not already there), better help messages for editor
commands.
	

			DISJUNCTION HEURISTIC     	
        We need the disjuction heuristic for ms88.  At present, this
is implemented only in ms90-3 and Sunil's propositional calculus
verifier. 
Add a flag for the disjunction heuristic.
Note: Two different heuristics are known by the same name here.


	Improve the process by which an expansion proof is constructed
after the pfd search has succeeded. Best would be to actually keep
track of the mating that was found. As a stopgap, in reconstructing
the mating by propositional search, use the improved version of
search, not the very primitive one.



SI	The global variables neg-h-var-list and  imitation-h-var-list 
contain particular variables for which the unification process is allowed
to generate only imitations, because of the ways negations are handled
for mating ffpairs and avoiding recursive redunancies.
However, when a new unification problem is started, the old variable
names will be reused, and they may be found on one of these lists when they
should not be.
Fixed for UN88 but not for UN90
Not a problem for MS90-3, but might be for MS90-9.

	See how much of Chapter 6 can be proved (as a practical matter)
in TPS, interactively or automatically:


	There may be a bug in MS90-3 so that after it finds the proof
of THM129, it cannot construct the etree properly. This may be due
to the quantifier in the skolem arguments, Perhaps alphabetic
changes get made.

	Add an econj* command which will eliminate all top-level
conjunctions at once. Similarly for ugen*. Is this compatible
with the way the RULES package allows one to specify rules?
Can one define these commands with tactics?

MS	MP2-TAC which applies modus ponens to infer B whenever A and 
[A IMPLIES B] are already in the proof.

	Fix help for theorems so that X5207 message will tell users
to ASSERT the lemmas which are needed here. 

--------------------------------------------------------------------------
	Procedure to translate ND proofs to "normal ND proofs" (NND proofs),
i.e., proofs without applications of Indirect, Negation, Substitute,
and = rules. (May be able to leave RuleP there.) Automatically translate
to NND proofs before translating to ET proofs. Experiment interactively too.
See if this bypasses all the bugs in translating from ND to ET.
	Have a translation into cut-free proofs. Use only instances of
RuleP which apply rules of a cut-free system of logic.
	Check Amy Felty's thesis; we may want to translate proofs into a
lambda-calculus representation, transform them there to eliminate cuts (etc.)
and then translate them back.
	A natural question is whether it is possible and advisable to do
this using (currently available or new) tactics.  Given a particular
proof, one can certainly make the lines justified by offending rules
into planned lines, and then apply the rules of inference of TPS to
find alternative justifications for these lines.  With the aid of the
tactical CALL it would seem that one ought to be able to design
compound tactics to carry out these steps, but its not immediately
clear to me whether one can pass the arguments to the commands around
within the current framework.
	Nesmith's reply:
This might be a little tricky to do using only existing tactics, i.e.,
not writing any primitive tactics, i.e., Lisp.  One problem is that
for EGEN and UI we do simple defaulting for the term, so you might not
always be able to rely on TPS generating the right defaults.  
But in some cases, I think it is doable, by replacing the existing subproof 
with the subproof as pfenning-tac would have produced it.  
For example, if you have the proof
(10)  10     !  ~FORALL x(I) A(O)                                           Hyp
(11)  10     !  EXISTS x(I) .~A(O)                                      Neg: 10

pfenning-tac would have proved this by the following steps: 
First, make room between 10, by say, moving 11 to 20, and pushing everything
down with it.
[PBA note: This seems to contain a logical error, but a similar example
which is correct can be constructed.]
plan 20
egen !
(ed 20)  ; here TPS prompts for the term
a & ok   
ineg !
eneg $ 10 ! ; default will not be correct
ugen !
same !

It would be pretty easy to write a primitive tactic to do this
automatically.

Here's how you could do it with existing tactics:

(deftactic norm-pushneg-univ-tac
 (nat-ded
  (ifthen (egen-match1 (caar (proof-plans dproof))) ;pline is existential
    (sequence (make-room :use nat-ded) 
              egen-tac (make-room :use nat-ded) 
              ineg-tac (make-room :use nat-ded) 
              eneg-tac (make-room :use nat-ded)  
              ugen-tac 
              same-tac))
  "Assume that we know that current planned line was originally produced
by pushneg, and it has exactly one support line."))

This will work because egen-tac will select the quantified variable
as a default.  Of course, this will only work if you start with
the existentially-quantified as the current planned line, and the negated
universal line as its only support.  Then you can use driver tactics, such
as, 

(deftactic norm-pushneg-tac
  (nat-ded
   (ifthen (recognize-somehow-that-this-planned-line-came-from-a-pushneg)
    (orelse ... norm-pushneg-univ-tac ... ))))

(deftactic norm-tac
  (nat-ded
   (orelse ... norm-pushneg-tac ... )))
            
One remaining problem is that the nat-ded tactic-use always assumes that
your current goal is a planned line, and if there are no planned lines,
it won't do anything.  So you will have to figure out a way to turn the
justified line into planned line, and of course you would like to do that
automatically as well.  One way might be to actually construct a new proof
without altering the old proof (this is done in the current implementation
of nat-etr, when it cleans up the proof and introduces a bunch of new lines),
and when you get to a line that is justified by a rule you don't like,
just leave it unjustified, but keep going with the lines it is justified
from, and save the justification for later use.  
At the end of the process you'll have a proof with a number of
planned lines, and how they were originally justified.  Then you can 
massage them as necessary before running your tactic.

------------------------------------------------------------------------
	Command to rearrange vpforms so as to move certain literals close
to each other while holding specified literals fixed.

	Fix TPS so that one can safely use w and h with or without 
superscripts in wfs and definitions.

	Fix the subjects in REVIEW so that flags concerned with proof
translation do not occur in the matingsearch subjects. Should they
(including REMOVE-LEIBNIZ) all be in TACTICS, or shoud there be a
new subject called TRANSLATION which includes most or all of the flags
i TACTICS?
	Take INITIAL-BKTRACK-LIMIT out of the subjects where it does not
belong. See the help message.
	Fix the OCCURS-CHECK flag or its name to be more natural. Look at
the help message. Adjust modes when this is done.
	Put NUM-OF-DUPS in subject MS90-3 MS90-9, and MS91-7.

---------------------------------------------------------------------
		RULE OF CASES
	Add to TPS the RULE OF CASES in the form of metatheorem
2140 in TTTP. (The current RULE OF CASES is 2139.)
--------------------------------------------------------------------------

	Enhance PRIM-SUBS so that (when the flag PRIM-SUB= is T) the
primitive substitution mechanism will also try substituting
[lambda u. lambda v. hu = hv] for variables of suitable type. (Consider
whether this is sufficiently general.)

	There is a bug in the SCRIPT command.  The problem can be seen
if you start a script file in a sub-top-level (such as mate), then
leave that top-level.  When you leave, the script file will be
stopped.  The problem occurs because SCRIPT is implemented using catch
and throw.  Leaving the top-level does a throw past the catch set up
by SCRIPT, so the file gets closed.  To fix this, change the
implementation to avoid using throw and catch.  It is a shame that
this is necessary, because it is very simple now.

	One can enter mate with an etree or a wff. If an etree is the 
default, you can just do <return>. However, if you type in the name
of the etree that you see as the default, TPS will complain that this
is not the name of a wff.

	Implement ideas in Sunil's thesis:
Set-of-support
Intelligent backtracking
Imbedding relation

	See Eve Cohen's message

SI	Document the basic facts about the two versions of unification

DN	Implement the procedure for expanding the matrix and
activating vpforms for matingsearch in such a way that different
expansions of the matrix are considered one at a time, then two at
a time, etc. DONE. MORE WORK:
	Document the basic ideas.
	Fix it so that one can interrupt it and restart gracefully.
	Try to make it avoid repeating combinations which are just
relabelings of variables. 
	Fix it so that little space is used, and we can run very long
searches. Set up facilities for checking where space is used.

	Fix all tps search procedures so that they can be gracefully
interrupted and restarted the way ms88 can be.

SI	Fix MS90-3 so that when NUM-OF-DUPS is set to NIL (or something
else appropriate), it starts off with NUM-OF-DUPS, set to 1, then does it
again with 2, and keeps incresing. Do something appropriate so that the
search process is complete in higher-order mode.


	Need a way to give the deep formula of an etree
a name, so we can play with it in the editor, etc.

DN	Date: Sat, 29 Oct 1988 07:23-EDT 
From: Daniel.Nesmith@CS.CMU.EDU
During testing, I noted a problem which hasn't arisen before, but
which we will have to handle somehow.  The unification algorithm returns
substitutions in long eta normal form (I think).  This means that in
some easily constructed examples, mated literals are equal only up
to eta.   This is a pain in translation, and currently causes failure.
One possibility is to detect this, and to insert another equality into
the proof which equates the two forms, then appropriately change the
connections.  E.g., we may have a constant F(II) which is supposed
to be the same as [lambda x. F x].  We could insert the equality
"F(II) = [lambda x. F x]" into the expansion proof so that things
work, then add an ETA proof rule which checks for equality up to eta.  
Another alternative is to try to change all our rules to allow
equivalence of wffs up to eta, but that sounds pretty bad.

	Give Universal Instantiation a default (the quantified variable)
for the instantiated term.

	The interactive matingsearch command COMPLETE-P uses a rather old
and naive function; we have more efficient procedures available to do this.

TRUE. The problem is more serious in matingstree project. But we may not
have to do the check in the first place. For instance, you need only check
the obligation tree to see if a mating is complete. This is pretty safe.
If there is a bug, it won't go through the translation process.(HX)

			FONTS
	Need more xterm fonts. Need epsilon on the line for IN

	Create a mechanism for creating and examining very large records of
searches for theorems. This might require that the record be broken into 
many files so that each file is of manageable size for an editor. We should
be able to ask various questions about the run and have the computer help
us find what we want to look at. A record should be written and periodically
updated showing what option sets have been considered, what they are, how
much time has been spent on them, their current weights, etc.

	Here are some TPS tasks concerning mating-search:

3. We need a new command in the unification top-level that shows all leaf nodes
   in the unification tree. We can do that at this time, but that requires 
   looking at the entire tree (and this can be a nuisance if the tree is 
   large.) 

4. Another command for unification top-level. We should perhaps have another
   command to go to a leaf node directly. Currently we can specify the name of 
   any node that we want to visit, but that can be annoying if it is deep down 
   in the tree. Maybe, it should specify all leaf nodes, and we can then select
   the desired node.

	Users who don't know what kind of argument to provide should be
able to get more help than they do now. ??? response from user could
elicit this.

	Define a tactic which applies lambda-normalization and then RuleP
when the corresponding expansion trees contain no nodes except propositional
nodes and lambda-nodes. The idea here is to shorten proofs in situations
where TPS does not recognize that RuleP is applicable simply because the
wff has not yet been normalized.

	Improve the recognition of types in arguments to TPS commands.
For example, when you assert a known theorem schema, and are prompted for
certain variables to determine the substitutions for type variables,
TPS should ask only enough questions to determine this information.
Also, more and better default arguments may be possible.

	Alter the save-work facility so that aborted commands and the
associated ^G or ^C never get put into the work file.

	A student has reported that a save-work file containing an
ASSERT comand will not work properly.


	We should think about inserting some sporadic messages into
matingsearch output which would give us some idea of what's going on when
we're running a very lengthy search. Perhaps such messages should
include the runcount, the name of the current jform, how many jforms
have been explored (and how many are still active), and (if this is
practical) some kind of counter which would give us an indication of
when the process is in a loop. What else would you suggest? Of course,
if we have a fancy window system for TPS someday, we might have
a Status Window which would maintain such information along with
the vpform of the current jform.

	w-vars and h-vars are no longer interned; this allows them to
get garbage-collected. Also, the FACE property has been removed from
these variables for the same reason. As a result, w^31 (for example)
will just print out that way, and not with 31 as a superscript. This
will save a lot of space during the search, but after the search for a
proof is over, one should put the face property back on these
variables before generating the expansion proof, so that they will
look nice in the final proof.

        When one updates MATING-SEARCH in REVIEW, one finds that one
can create a REC-MS-FILE and a PRINTMATEFILE. What is the difference?
Do we really want both of them?


			BUGS TO FIX SOMEDAY
See usrk2/andrews/bugs.hg

			PROJECTS 

	Multiprocessing version
	Documentation
	See the file WINDOWJOBS

	Implement an alternative breadth-first matingsearch in which the
parallelism is all represented in the unification tree. Each node of the
tree represents a partial mating and the path in the jform which 
occurred last in the generation of this partial mating. 

	 Find ways to speed up higher-order unification:
In MATCH, when TPS confronts 
<[lambda u1...un f E1...Ek], [lambda u1...un ui...]>,
it coold just apply projections onto those coordinates j such that
ui is free in Ej, since others cannot possibly have the desired
effect. This would reduce branching; while other projections would
eventually fail, lots of work might be done on other dpairs in the
nodes they create before TFN's are found.

	Implement a check for whether a wff is "essentially first-order",
i.e., its  free and boiund variables all have non-compound types. In this
case TPS should automatically switch to an essentially first-order mode.
	
	EXAMINING SEARCHES AND ANALYZING THEM
	Better facilities for knowing what expansion options (or jforms)
have been considered as one searches for an expansion proof.
	Facilities (which can be used or not) for having TPS keep track
of the maximum or minimum values of various search parameters, so that we
can quickly find optimal values for these parameters for a particular
theorem and search strategy.

	Better facilites for doing matingsearch interactively.
What is the nextbadpath?
What connections are available?

	Better scheme for translating from ND proofs to eproofs. First
translate to a sequent proof as in Pfenning's thesis.
Permit the improved Subst= rule to be used in the ND proofs

	A more general framework for defining and testing search strategies.
(Ways of dealing with heuristics of various types.)
	Rewrite the code for handling plan-support transforamtions,
which has gotten to be one big kluge.
	Write a description of the search procedure and expansion
procedure for the programmer's manual and a paper.
	Incorporate Cline's version of Gnu-emacs with special characters.
	Translation of natural deduction proofs into English. Consult a
linguist on the right framework for doing this
	Find improved heuristics for matingsearch
	Find improved heuristics for expanding the wff
	Design a good way to deal with =
	Find a concise way to store "hints" with a theorem which will enable
one to generate an expansion proof without much search. Can we do better than
listing the expansion terms in a way which will make it clear where they
will be applied?
	Rewrite much of Principia Mathematica (translated into
Church's type theory) in an intelligent way using TPS. Store all
definitions and theorems, and hints for their proofs, in the library. 
		
------------------------------------------------------------------------
	Interface TPS with Garnet to get a sophisticated display
system?
See $afspba/garnet.hlp and Garnet manual. $afspba/garnet-tps.doc
may also be useful, but probably is not.
--------------------------------------------------------------------------
		EXECUTE-FILE
	Lower priority:
	Fix execute-file so it can be called from mate (and other top
levels) as well as from the main top level. Verify that at present it
can be called only from the main top level, and put that in the help
message until this is fixed.
	Can one make execute-file work in one-step mode when one
changes top-levels in the work file?
-------------------------------------------------------------------------
UNALIAS and END-PRFW should not really be listed as top-levels. Figure
out how these pseudo top-levels really should be handled.
------------------------------------------------------------------
Many files listed as miscellaneous files in the tps facilities guide
are actually lisp source files, and should be so listed.
Example: etrees-skolem.lisp is listed as a miscellaneous file in the guide,
not a lisp source file, but it contains the code
(deffile etrees-skolem
  (part-of expansion-tree)
  (extension lisp)

------------------------------------------------------------------
Incidental question: why isn't the file tops20 in the facilities guide?
Also lsppck
Does the filename have to be exported to get the file into the guide?
Note that wffcat is exported in core.exp, and it is in the guide.
-----------------------------------------------------------------------------

		PRINTING PROOFS ON ANDREW
	The file /afs/andrew.cmu.edu/mcs/math/TPS/common/etps.ini is not the same
as /afs/andrew.cmu.edu/mcs/math/etps/common/etps.ini. In particular,
they have different Scribe preambles. If etps exercises are added
which require printing more symbols, it may be desirable to adjust
/afs/andrew.cmu.edu/mcs/math/etps/common/etps.ini. It should be tested
to make sure that one can run scribe from the computation center and use
computation center printers to print the proofs.
-------------------------------------------------------------------------

	UPDATE JFORM AND CGRAPH IN LIGHT OF THE CURRENT MATING

This job may be unnecessary; just set MIN-QUICK-DEPTH high enough.

	(For the present, at least, this applies only to MS88 and the
procedures MS89 and MS91-6 which use it.)
	At certain times (to be controlled by some flag; see below) in
the mating process, compute the "least common substitution" associated
with the current mating. One way to do this is to just call
unification on the current mating, and have it proceed to
non-branching depth. (See the help message for MIN-QUICK-DEPTH. Also
see unify in unif-tree.lisp.)
	Then apply that substitution to a copy of the jform, and
create a new connection graph relative to that jform. (Create the
connection graph essentially as ms88 now does it (see cgraph in
connections.lisp); hopefully this is a lazy way which creates the
information only as it is needed. Of course, the new cgraph will be a
subset (as a set of connections) of the previous cgraph; this fact
should be used to speed up the process.
	Use the new jform and connection graph in the matingsearch
process until we backtrack to the point where we are no longer
extending that mating.
	Perhaps the flag should be called UPDATE-JFORM (if this name
is not already used for something)  and take values of type
INTEGER+-OR-INFINITY. If its value is n, a new copy of the jform will
be created every time the new mating contains n links more than the
mating which was used to create the previous jform. When the value is 
INFINITY, the procedure should work exactly ads it does now.
	
	When we create an updated jform by applying the partial
substitutions induced by the current mating, the new jform will
contain the new variables which occur in the partial substitutions.
How must these be handled?

	How will our way of handling ffpairs (for some documentation,
search for ffpair in /afs/andrew.cmu.edu/mcs/math/TPS/doc/prog/newdoc) be
affected by this?  Might the updated jform commit us to putting the
negation on the wrong literal? (Of course, we hope to arrange things
so that we will not mate ffpairs very often, but I don't know whether
we can entirely avoid it.)

	When we backtrack, we would like to throw away the
temporary jforms, cgraphs, and associated objects so that we
don't clutter up memory. Does it suffice to uinintern them?

	Test this on THM112C. Note: This may not help on THM112c
until we implement a subsumption test for unification. See the
example under SUBSUMPTION TEST FOR UNIFICATION.


	Eventually consider applying the same ideas to the path-focused
duplication procedures. They do not use the cgraph, but updating the
jform might still be useful.
If this change really does help us prove THM112C, which
requires no quantifier duplication, we might consider THM112B, which
is like it but does require duplicating one quantifier.  When using
path-focused duplication, will it help to update the jform even though
there is no cgraph? Would it be useful to introduce a cgraph?


	(We might also want to rearrange the jform 
at the times when we update the jform, but that may introduce
complications. Some theoretical work needs to be done to make sure we
would still have a complete search procedure.)

--------------------------------------------------------------------
                       POSSIBLE MODIFICATIONS TO TPS
	Perhaps type symbols and type variables should be represented
in a more general way in names of variables so that we can have more
than the 26 letters as type variables. For example, within identifiers
we might represent the type symbol (A . B) as <A * B>.
	Instead of being committed to particular property to decide
whether an object is a constant, etc., use recognition functions such
as label-p. This allows more flexibility in converting between
different dialect of LISP.
	Change the representation of lambda from NIL to LAMBDA.
How much troulbe would this cause for the interface with Eve's
programs?
[moved this here from ..doc/prog/newdoc... it seems to belong here... MB]
========================================================================
		WORK FILES WITH FIXED DEFAULTS
	Sometimes one wants to execute a work file in a context a little
different from that in which the work was orginally done. (For example,
different work files may be used to prove different parts of a proof,
and one may or may not execute all the work files in the same order.)
It wopuld be nice to be able to set a flag which would cause the actual 
default value of a prompt to be saved n the work file
if one chooses the default.
=====================================================================

		Meta-theorems
Someday (perhaps far in the future) TPS should be
able to prove metatheorems relevant to the way it works (or might
work) and apply these to introduce changes in its own behavior. For
example, we might have a formalization of higher-order unification,
prove in TPS that certain branches of the utree need not be explored
in certain circumstances, and more or less automatically convert this
metatheorem into an apropriate addition to the unification code.
	Some work in theorem-proving for which the word meta
does seem appropriate may be found in:
Richard W. Weyhrauch,
"Prolegomena to a theory of mechanized formal reasoning",
Artificial Intelligence 13 (1980 April), 133-170.	

Richard W. Weyhrauch,
"An example of FOL using metatheory. ..."		
CADE-6, 151-

===============================================================
	LITERAL-FOCUSED DUPLICATION.
Note: There is some question whether the overhead involved here
is worth the benefit.

	Initially, devise a variant of path-focused duplication
under which quantifiers are duplicated on a path only if their
scopes contain literals which have potential mates on that path.
Control the application of this variant by setting the flag
DUPLICATION-STRATEGY.

(HX After thinking a bit further, I found this variant seems not
promising at all. It may speed up the search a bit, but would
not give us a significant improvement.)


	Design a modified version of ms90-3 which we can call
Literal-focused duplication.
	Call this MS94-8.
	We duplicate quantifiers only when an attempt to mate a pair
of literals impels us to do so. We duplicate the quantifiers which
crteatre new copies of these literals. There may be some alternatives
as to just which quantifiers we duplicate (or which we try first), and
these choices might be controlled by use of the existing flag
DUPLICATION-STRATEGY (which might need some new possible values).

	In addition to being useful for itself, this may help in
dealing with equality, and the need for generating multiple copies of
equality literals.

(HX The crucial issue here is which pair of literals on a path
should be chosen first. If you always choose the first
potentially unifiable one on a path, the procedure may end up
very much like the variant aforementioned. In other words, paths
should be enumerated in a different way in order to obtain a
considerably big improvement.)

==========================================================
===========================================================
	Examining compound definitions in set theory

See what the wff in the f COMPOSE g = g COMPOSE f in the existence lemma for
THM15B in set theory looks like when we expand the definitions. Do this with
the aid of some abbreviations in TPS which can be expanded at leisure.  Define
something like GVB-EQUIV too. Once these defintions have been put into a
library file, one will be able to print out snapshots of the expansion process
as well as the final result very easily. Give them faces just like the
corresponding notations we are now using. Having these abbreviations 
in a library file may also be useful for quickly examining other examples
in the future.

If necessary, set UNTYPED-LAMBDA-CALCULUS to T.
======================================================================

Date: Thursday, 24 October 1991 20:31:16 EDT
From: Peter.Andrews@k.gp.cs.cmu.edu
To: Nesmith@K.GP.CS.CMU.EDU
cc: Issar@K.GP.CS.CMU.EDU
Subject: Continued search on jforms
Message-ID: <1991.10.25.0.21.25.Peter.Andrews@K.GP.CS.CMU.EDU>

        Here's a reminder about a question I sent you while you
were away. If the answer is complicated and you don't have time
to answer it properly now, I understand, but enlightenment on this
subject would help us to anticipate what results we might be
able to get by letting tps run for a long time.I've let tps
run all night repeatedly lately, but there's only one instance where
it may have proved anything that it couldn't prove in less than
30 minutes. (That possible example ran into the translation bug,
so I didn't get a runcount for it.)
        When tps temporarily gives up on one option set and later
returns to the jform associated with that option set, where does
it start searching again if it is using ms90-9? Does it start over
(thus repeating itself except for the contributions of the failure
record for the non pfd (path-focused duplication) procedures),
start from where it left off, or something else?
        I guess it would be good to clarify this for the other
search procedures as well.

Subject: Re: Continued search on jforms 
In-Reply-To: Your message of "Thu, 24 Oct 91 20:31:21 EDT."
             <1991.10.25.0.21.25.Peter.Andrews@K.GP.CS.CMU.EDU> 
Date: Fri, 25 Oct 91 20:01:08 +0100
Message-Id: <3816.688417268@js-sfbslc10>
From: "Dan.Nesmith" <nesmith@cs.uni-sb.de>



I think that I thought I responded to this once, but perhaps it never
got out. 

I don't believe that with path-focused duplication, as it is currently
implemented, it is possible to return to a jform and continue work.
That means, in essence, that MS90-9 and MS91-7, when they return
to a jform, start over.  

The problem is that the data used by MS90-3 to keep track of where it
is is dynamic; the active-path, unif-prob, env-stack, active-jform,
mating, etc., are not stored anywhere during the search process, rather
they are passed around from procedure to procedure.  

This could in principle be changed, I think, by storing this stuff
somewhere whenever it runs out of time, then checking for it the next
time the option-set is tried.  I will investigate this, and if I can
make it work, will let you know.
==============================================================
			TIMING

Subject: Timing bug on GTPS
Date: Tue, 02 Jun 1998 16:14:41 -0400
From: Matt Bishop <Matt_Bishop@FTPS.TPS.CS.CMU.EDU>


I've tracked down the timing bug that was giving us negative search times
on GTPS (and, in fact, wrong search times on all Allegro versions).

Allegro's timing routines return four values: total time and gc time for
both "user" and "system". We were counting both user and system gc times,
but only user total time; this is why the run time (total - gc) was 
sometimes negative. For Allegro on FTPS/DTPS, system time was generally 
small by comparison to user time, and so we didn't notice the anomaly.
On GTPS, system time seems to be much larger by comparison.

I'm not entirely sure what "system time" includes, but it is definitely 
timing some Lisp functions (i.e. it isn't just the elapsed real time),
so I've changed the timing routines to include it, by introducing a new
function tps-get-internal-run-time which is called in place of 
get-internal-run-time. This will increase some search times for Allegro 
versions of TPS, but not by much.
======================================================
At present, the face of a logical symbol
must be a list of printable symbols to be concatenated.
It would be nice to be able to have an empty face so that
in algebraic notation one could print A*B as AB.
======================================================
